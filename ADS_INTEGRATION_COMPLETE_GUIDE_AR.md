# ๐ฐ ุฏููู ุฑุจุท ุงูุฅุนูุงูุงุช ุงูุดุงูู - ูู ุงูุตูุฑ ุฅูู ุงูุฑุจุญ

**ุชุงุฑูุฎ:** 7 ููููุจุฑ 2025  
**ุงููุฏู:** ุฑุจุท ูุธุงู ุงูุฅุนูุงูุงุช ุจู Google AdMob ูุญุณุงุจ ุงูุฃุฑุจุงุญ

---

## ๐ ูุธุฑุฉ ุนุงูุฉ

### ูุง ุณูุญููู:

```
1. โ ุฑุจุท Google AdMob ุจุงูุชุทุจูู
2. โ 3 ุฃููุงุน ูู ุงูุฅุนูุงูุงุช:
   - Rewarded Video Ads (ุฅุนูุงูุงุช ุงูููุฏูู ุงููููุงูุฃุฉ)
   - Banner Ads (ุฅุนูุงูุงุช ุงูุจุงูุฑ)
   - Interstitial Ads (ุฅุนูุงูุงุช ุจูู ุงูุตูุญุงุช)
3. โ ูุธุงู ุชุชุจุน ุงูุฃุฑุจุงุญ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
4. โ ููุญุฉ ุชุญูู ููุฃุฑุจุงุญ
5. โ ุชูุงูู ูุน ูุธุงู ุงูููุงูุขุช
```

### ุงูุฃุฑุจุงุญ ุงููุชููุนุฉ:

```
๐ ุงูุชูุฏูุฑุงุช (ุญุณุจ ุงูููุทูุฉ):
โโโโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโ
โ ููุน ุงูุฅุนูุงู    โ eCPM (ูุชูุณุท)     โ ููู 1000 ูุดุงูุฏุฉ โ
โโโโโโโโโโโโโโโโโโผโโโโโโโโโโโโโโโโโโโผโโโโโโโโโโโโโโโค
โ Rewarded Video โ $8-$15           โ $8-$15       โ
โ Interstitial   โ $4-$10           โ $4-$10       โ
โ Banner         โ $0.50-$2         โ $0.50-$2     โ
โโโโโโโโโโโโโโโโโโดโโโโโโโโโโโโโโโโโโโดโโโโโโโโโโโโโโโ

ูุซุงู: 1000 ูุณุชุฎุฏู ูุดุท ููููุงู
- ูู ูุณุชุฎุฏู ูุดุงูุฏ 5 rewarded videos
- = 5000 ูุดุงูุฏุฉ ููููุงู
- = $40-$75 ูู ุงูููู
- = $1,200-$2,250 ูู ุงูุดูุฑ ๐ฐ
```

---

## ๐ ุงูุฎุทูุฉ 1: ุฅุนุฏุงุฏ Google AdMob

### 1.1 ุฅูุดุงุก ุญุณุงุจ AdMob

1. ุงุฐูุจ ุฅูู: https://admob.google.com/
2. ุณุฌูู ุฏุฎูู ุจุญุณุงุจ Google
3. ุฃูุดุฆ ุญุณุงุจ AdMob ุฌุฏูุฏ
4. ุงููุฃ ูุนูููุงุช ุงูุฏูุน (ุจุทุงูุฉ ุจูููุฉ/PayPal)

### 1.2 ุฅูุดุงุก ุชุทุจูู ูู AdMob

```
1. ุงุถุบุท "Apps" ูู ุงููุงุฆูุฉ ุงูุฌุงูุจูุฉ
2. ุงุถุบุท "ADD APP"
3. ุงุฎุชุฑ ุงูููุตุฉ: "Android" ุฃู "iOS"
4. ุฃุฏุฎู ุงุณู ุงูุชุทุจูู: "Telegram Rewards Bot"
5. ุงุถุบุท "ADD"
```

**ุณุชุญุตู ุนูู:**
```
App ID: ca-app-pub-XXXXXXXXXXXXXXXX~XXXXXXXXXX
```

### 1.3 ุฅูุดุงุก Ad Units

#### A. Rewarded Video Ad
```
1. ุงุถุบุท "Ad units" ูู ุงููุงุฆูุฉ
2. ุงุถุบุท "ADD AD UNIT"
3. ุงุฎุชุฑ "Rewarded"
4. ุงูุงุณู: "Rewards Bonus Video"
5. ุงุถุบุท "CREATE AD UNIT"
```

**ุณุชุญุตู ุนูู:**
```
Rewarded Ad Unit ID: ca-app-pub-XXXXXXXXXXXXXXXX/YYYYYYYYYY
```

#### B. Interstitial Ad
```
ููุณ ุงูุฎุทูุงุชุ ููู ุงุฎุชุฑ "Interstitial"
ุงูุงุณู: "Game Interstitial"
```

**ุณุชุญุตู ุนูู:**
```
Interstitial Ad Unit ID: ca-app-pub-XXXXXXXXXXXXXXXX/ZZZZZZZZZZ
```

#### C. Banner Ad
```
ููุณ ุงูุฎุทูุงุชุ ููู ุงุฎุชุฑ "Banner"
ุงูุงุณู: "Bottom Banner"
ุงูุญุฌู: 320x50 (Standard Banner)
```

**ุณุชุญุตู ุนูู:**
```
Banner Ad Unit ID: ca-app-pub-XXXXXXXXXXXXXXXX/WWWWWWWWWW
```

---

## ๐ป ุงูุฎุทูุฉ 2: ุชูุงูู ุงูููุฏ

### 2.1 ุชุญุฏูุซ Environment Variables

```env
# ูู ููู .env:

# AdMob IDs
NEXT_PUBLIC_ADMOB_APP_ID=ca-app-pub-XXXXXXXXXXXXXXXX~XXXXXXXXXX
NEXT_PUBLIC_ADMOB_REWARDED_ID=ca-app-pub-XXXXXXXXXXXXXXXX/YYYYYYYYYY
NEXT_PUBLIC_ADMOB_INTERSTITIAL_ID=ca-app-pub-XXXXXXXXXXXXXXXX/ZZZZZZZZZZ
NEXT_PUBLIC_ADMOB_BANNER_ID=ca-app-pub-XXXXXXXXXXXXXXXX/WWWWWWWWWW

# For testing (ุงุณุชุฎุฏููุง ุฃุซูุงุก ุงูุชุทููุฑ):
NEXT_PUBLIC_USE_TEST_ADS=true
```

### 2.2 ุชุซุจูุช ุงูููุชุจุงุช

```bash
# ููุณุช ูุทููุจุฉ - ุณูุณุชุฎุฏู Telegram Ad Platform
# ุฃู HTML5 Ads ุนุจุฑ iframes

# ููู ุฅุฐุง ุฃุฑุฏุช ุงุณุชุฎุฏุงู Google AdMob ูู React:
pnpm add react-google-ads
```

### 2.3 ุฅูุดุงุก Ad Manager Utility

```typescript
// lib/ad-manager.ts

export type AdType = 'REWARDED_VIDEO' | 'INTERSTITIAL' | 'BANNER';

export interface AdConfig {
  appId: string;
  rewardedAdId: string;
  interstitialAdId: string;
  bannerAdId: string;
  useTestAds: boolean;
}

export interface AdReward {
  type: string;
  amount: number;
}

class AdManager {
  private config: AdConfig;
  private isInitialized = false;
  
  constructor() {
    this.config = {
      appId: process.env.NEXT_PUBLIC_ADMOB_APP_ID || '',
      rewardedAdId: process.env.NEXT_PUBLIC_ADMOB_REWARDED_ID || '',
      interstitialAdId: process.env.NEXT_PUBLIC_ADMOB_INTERSTITIAL_ID || '',
      bannerAdId: process.env.NEXT_PUBLIC_ADMOB_BANNER_ID || '',
      useTestAds: process.env.NEXT_PUBLIC_USE_TEST_ADS === 'true'
    };
  }
  
  async initialize(): Promise<void> {
    if (this.isInitialized) return;
    
    // Initialize AdMob SDK
    // ูู Telegram Web Appุ ูุณุชุฎุฏู Telegram Ads Platform
    if (typeof window !== 'undefined' && window.Telegram?.WebApp) {
      console.log('โ Telegram Ads Platform ready');
      this.isInitialized = true;
    }
  }
  
  async showRewardedAd(userId: string): Promise<AdReward | null> {
    if (!this.isInitialized) {
      await this.initialize();
    }
    
    return new Promise((resolve) => {
      // ูู ุงูุฅูุชุงุฌุ ูุณุชุฎุฏู Telegram.WebApp.showRewardedAd()
      // ุฃู HTML5 Ad iframe
      
      // ููุชุฌุฑุจุฉ ุงูุขู:
      if (this.config.useTestAds) {
        // ูุญุงูุงุฉ ุฅุนูุงู
        setTimeout(() => {
          console.log('โ Rewarded ad completed (test mode)');
          resolve({
            type: 'REWARDED_VIDEO',
            amount: 100 // ุงูููุงูุฃุฉ
          });
        }, 2000);
      } else {
        // โ ุงูููุฏ ุงููุนูู ูู ุงูุฅูุชุงุฌ:
        // this.loadRealAd('rewarded');
        resolve(null);
      }
    });
  }
  
  async showInterstitialAd(): Promise<boolean> {
    if (!this.isInitialized) {
      await this.initialize();
    }
    
    return new Promise((resolve) => {
      if (this.config.useTestAds) {
        setTimeout(() => {
          console.log('โ Interstitial ad shown (test mode)');
          resolve(true);
        }, 1500);
      } else {
        // this.loadRealAd('interstitial');
        resolve(false);
      }
    });
  }
  
  showBannerAd(containerId: string): void {
    if (!this.isInitialized) {
      this.initialize();
    }
    
    const container = document.getElementById(containerId);
    if (!container) return;
    
    if (this.config.useTestAds) {
      // ูุญุงูุงุฉ ุจุงูุฑ
      container.innerHTML = `
        <div style="width: 320px; height: 50px; background: linear-gradient(to right, #667eea, #764ba2); 
                    display: flex; align-items: center; justify-content: center; color: white; font-weight: bold;">
          ๐ฏ Test Banner Ad
        </div>
      `;
    } else {
      // this.loadRealAd('banner', container);
    }
  }
  
  async recordAdView(userId: string, adType: AdType, reward?: number): Promise<void> {
    // ุญูุธ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
    try {
      await fetch('/api/ads/record', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({
          userId,
          adType,
          reward: reward || 0,
          timestamp: new Date().toISOString()
        })
      });
    } catch (error) {
      console.error('Failed to record ad view:', error);
    }
  }
}

export const adManager = new AdManager();
```

### 2.4 ุฅูุดุงุก Rewarded Ad Component

```typescript
// components/rewarded-ad-button.tsx

'use client';

import { useState } from 'react';
import { Button } from '@/components/ui/button';
import { Play, Gift } from 'lucide-react';
import { adManager } from '@/lib/ad-manager';
import { useAuth } from '@/lib/auth-context';

interface Props {
  rewardAmount: number;
  buttonText?: string;
  onRewardEarned?: (reward: number) => void;
}

export function RewardedAdButton({ rewardAmount, buttonText, onRewardEarned }: Props) {
  const { user } = useAuth();
  const [loading, setLoading] = useState(false);
  
  const handleWatchAd = async () => {
    if (!user) {
      if (window.Telegram?.WebApp) {
        window.Telegram.WebApp.showAlert('โ๏ธ ูุฌุจ ุชุณุฌูู ุงูุฏุฎูู ุฃููุงู');
      }
      return;
    }
    
    setLoading(true);
    
    try {
      // ุนุฑุถ ุงูุฅุนูุงู
      const reward = await adManager.showRewardedAd(user.id);
      
      if (reward) {
        // ุชุณุฌูู ูู DB
        await adManager.recordAdView(user.id, 'REWARDED_VIDEO', reward.amount);
        
        // ุฅุถุงูุฉ ุงูููุงูุฃุฉ
        const response = await fetch('/api/ads/claim-reward', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({
            userId: user.id,
            adType: 'REWARDED_VIDEO',
            amount: reward.amount
          })
        });
        
        if (response.ok) {
          const data = await response.json();
          
          if (window.Telegram?.WebApp) {
            window.Telegram.WebApp.showAlert(`๐ ุฑุงุฆุน! ุญุตูุช ุนูู ${reward.amount} ุนููุฉ!`);
          }
          
          onRewardEarned?.(reward.amount);
        }
      }
    } catch (error) {
      console.error('Error showing ad:', error);
      if (window.Telegram?.WebApp) {
        window.Telegram.WebApp.showAlert('โ ุญุฏุซ ุฎุทุฃ ูู ุชุญููู ุงูุฅุนูุงู');
      }
    } finally {
      setLoading(false);
    }
  };
  
  return (
    <Button
      onClick={handleWatchAd}
      disabled={loading}
      className="w-full bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700"
    >
      {loading ? (
        <>
          <div className="animate-spin rounded-full h-5 w-5 border-t-2 border-b-2 border-white mr-2"></div>
          ุฌุงุฑู ุงูุชุญููู...
        </>
      ) : (
        <>
          <Play className="w-5 h-5 mr-2" />
          {buttonText || `ุดุงูุฏ ุฅุนูุงู ูุงุญุตู ุนูู ${rewardAmount} ุนููุฉ`}
        </>
      )}
    </Button>
  );
}
```

---

## ๐๏ธ ุงูุฎุทูุฉ 3: ูุงุนุฏุฉ ุงูุจูุงูุงุช

### 3.1 ุฅุถุงูุฉ Models ุฅูู Prisma

```prisma
// ูู prisma/schema.prisma

// ุฅุถุงูุฉ ุฅูู ููุงูุฉ ุงูููู:

model AdWatch {
  id        String   @id @default(uuid())
  
  userId    String
  user      User     @relation(fields: [userId], references: [id], onDelete: Cascade)
  
  adType    AdType
  reward    Int      @default(0)
  
  // Ad metadata
  adNetwork String   @default("AdMob")
  adUnitId  String?
  
  // ููุชุญููู
  completionRate Float?  // ูุณุจุฉ ุงูุฅููุงู (0-1)
  watchDuration  Int?    // ูุฏุฉ ุงููุดุงูุฏุฉ ุจุงูุซูุงูู
  
  createdAt DateTime @default(now())
  
  @@index([userId, adType, createdAt])
  @@index([createdAt])
}

enum AdType {
  REWARDED_VIDEO
  INTERSTITIAL
  BANNER
}

model AdRevenue {
  id           String   @id @default(uuid())
  
  date         DateTime @unique
  
  // Impressions
  rewardedImpressions     Int @default(0)
  interstitialImpressions Int @default(0)
  bannerImpressions       Int @default(0)
  
  // Revenue (ุจุงูุฏููุงุฑ - ูุถุฑุจ ร 1,000,000 ููุฏูุฉ)
  rewardedRevenue         BigInt @default(0)
  interstitialRevenue     BigInt @default(0)
  bannerRevenue           BigInt @default(0)
  totalRevenue            BigInt @default(0)
  
  // eCPM
  rewardedEcpm     Float?
  interstitialEcpm Float?
  bannerEcpm       Float?
  
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  
  @@index([date])
}

// ุชุญุฏูุซ User model - ุฅุถุงูุฉ:
model User {
  // ... ุงูุญููู ุงูููุฌูุฏุฉ ...
  
  adWatches AdWatch[]  // ุฅุถุงูุฉ ูุฐุง ุงูุณุทุฑ
}
```

### 3.2 ุชุทุจูู ุงูุชุบููุฑุงุช

```bash
# ุชูููุฏ Prisma Client
pnpm prisma generate

# ุชุทุจูู ุนูู DB
pnpm prisma db push
```

---

## ๐ ุงูุฎุทูุฉ 4: API Endpoints

### 4.1 ุชุณุฌูู ูุดุงูุฏุฉ ุฅุนูุงู

```typescript
// app/api/ads/record/route.ts

import { NextRequest, NextResponse } from 'next/server';
import { prisma } from '@/lib/prisma';

export async function POST(req: NextRequest) {
  try {
    const body = await req.json();
    const { userId, adType, reward, watchDuration } = body;
    
    // ุงูุชุญูู ูู ุงููุฏุฎูุงุช
    if (!userId || !adType) {
      return NextResponse.json({
        success: false,
        error: 'Missing required fields'
      }, { status: 400 });
    }
    
    // ุญูุธ ูู DB
    const adWatch = await prisma.adWatch.create({
      data: {
        userId,
        adType,
        reward: reward || 0,
        watchDuration,
        completionRate: watchDuration ? 1.0 : null,
        adNetwork: 'AdMob'
      }
    });
    
    return NextResponse.json({
      success: true,
      data: adWatch
    });
  } catch (error) {
    console.error('Error recording ad:', error);
    return NextResponse.json({
      success: false,
      error: 'Failed to record ad view'
    }, { status: 500 });
  }
}
```

### 4.2 ุงููุทุงูุจุฉ ุจููุงูุฃุฉ ุงูุฅุนูุงู

```typescript
// app/api/ads/claim-reward/route.ts

import { NextRequest, NextResponse } from 'next/server';
import { prisma } from '@/lib/prisma';

export async function POST(req: NextRequest) {
  try {
    const body = await req.json();
    const { userId, adType, amount } = body;
    
    if (!userId || !adType || !amount) {
      return NextResponse.json({
        success: false,
        error: 'Missing required fields'
      }, { status: 400 });
    }
    
    // ุงูุชุญูู ูู ุงููุณุชุฎุฏู
    const user = await prisma.user.findUnique({
      where: { id: userId }
    });
    
    if (!user) {
      return NextResponse.json({
        success: false,
        error: 'User not found'
      }, { status: 404 });
    }
    
    // ุฅุถุงูุฉ ุงูููุงูุฃุฉ
    const result = await prisma.$transaction(async (tx) => {
      // ุชุญุฏูุซ ุงูุฑุตูุฏ
      const updatedUser = await tx.user.update({
        where: { id: userId },
        data: {
          balance: {
            increment: amount
          }
        }
      });
      
      // ุฅุถุงูุฉ ูู RewardLedger
      await tx.rewardLedger.create({
        data: {
          userId,
          type: 'AD_WATCH',  // โ ุฅุถุงูุฉ AD_WATCH ุฅูู RewardType enum
          amount,
          description: `Watched ${adType} ad`,
          balanceBefore: user.balance,
          balanceAfter: updatedUser.balance
        }
      });
      
      return updatedUser;
    });
    
    return NextResponse.json({
      success: true,
      data: {
        newBalance: result.balance,
        rewardAmount: amount
      }
    });
  } catch (error) {
    console.error('Error claiming reward:', error);
    return NextResponse.json({
      success: false,
      error: 'Failed to claim reward'
    }, { status: 500 });
  }
}
```

### 4.3 ุฅุญุตุงุฆูุงุช ุงูุฅุนูุงูุงุช

```typescript
// app/api/ads/stats/route.ts

import { NextRequest, NextResponse } from 'next/server';
import { prisma } from '@/lib/prisma';

export async function GET(req: NextRequest) {
  try {
    const userId = req.nextUrl.searchParams.get('userId');
    
    if (!userId) {
      return NextResponse.json({
        success: false,
        error: 'User ID required'
      }, { status: 400 });
    }
    
    // ุฅุญุตุงุฆูุงุช ุงููุณุชุฎุฏู
    const today = new Date();
    today.setHours(0, 0, 0, 0);
    
    const stats = await prisma.adWatch.groupBy({
      by: ['adType'],
      where: {
        userId,
        createdAt: { gte: today }
      },
      _count: true,
      _sum: {
        reward: true
      }
    });
    
    // ุญุฏ ุงููุดุงูุฏุงุช ุงูููููุฉ
    const limits = {
      REWARDED_VIDEO: 10,
      INTERSTITIAL: 20,
      BANNER: Infinity
    };
    
    const result = stats.reduce((acc, stat) => {
      acc[stat.adType] = {
        watchedToday: stat._count,
        limit: limits[stat.adType],
        remaining: limits[stat.adType] === Infinity 
          ? Infinity 
          : Math.max(0, limits[stat.adType] - stat._count),
        totalReward: stat._sum.reward || 0
      };
      return acc;
    }, {} as any);
    
    return NextResponse.json({
      success: true,
      data: result
    });
  } catch (error) {
    console.error('Error fetching ad stats:', error);
    return NextResponse.json({
      success: false,
      error: 'Failed to fetch stats'
    }, { status: 500 });
  }
}
```

---

## ๐จ ุงูุฎุทูุฉ 5: ุชูุงูู ูุงุฌูุฉ ุงููุณุชุฎุฏู

### 5.1 ุฅุถุงูุฉ ูู ุตูุญุฉ ุงูููุงูุขุช

```typescript
// ูู app/mini-app/rewards/page.tsx
// ุฅุถุงูุฉ section ุฌุฏูุฏ:

import { RewardedAdButton } from '@/components/rewarded-ad-button';

// ุฏุงุฎู ุงูู component:

<Card className="bg-gradient-to-r from-pink-600/20 to-purple-600/20 border-pink-500/50 mb-6">
  <div className="p-5">
    <div className="flex items-center gap-3 mb-4">
      <div className="w-12 h-12 rounded-full bg-pink-500/20 flex items-center justify-center">
        ๐บ
      </div>
      <div>
        <h3 className="font-bold text-lg">ููุงูุขุช ุงูุฅุนูุงูุงุช</h3>
        <p className="text-sm text-gray-300">ุดุงูุฏ ุฅุนูุงูุงุช ูุงุญุตู ุนูู ุนููุงุช ูุฌุงููุฉ!</p>
      </div>
    </div>
    
    <RewardedAdButton 
      rewardAmount={100}
      onRewardEarned={(amount) => {
        // ุฅุนุงุฏุฉ ุชุญููู ุงูุจูุงูุงุช
        loadRewards();
      }}
    />
    
    <div className="mt-3 text-xs text-gray-400 text-center">
      ๐ก ููููู ูุดุงูุฏุฉ ุญุชู 10 ุฅุนูุงูุงุช ููููุงู
    </div>
  </div>
</Card>
```

### 5.2 ุฅุถุงูุฉ ูู ุตูุญุฉ ุงูุฃูุนุงุจ

```typescript
// ูู app/mini-app/games/page.tsx
// ุนุฑุถ ุฅุนูุงู interstitial ุจุนุฏ ูู 3 ุฃูุนุงุจ:

let gamesPlayedCount = 0;

const playGame = async () => {
  // ... ุงููุนุจ ุงูุนุงุฏู
  
  gamesPlayedCount++;
  
  // ูู 3 ุฃูุนุงุจุ ุนุฑุถ interstitial
  if (gamesPlayedCount % 3 === 0) {
    await adManager.showInterstitialAd();
    await adManager.recordAdView(user.id, 'INTERSTITIAL');
  }
};
```

### 5.3 ุฅุถุงูุฉ Banner ูู Footer

```typescript
// ูู app/mini-app/layout.tsx

import { useEffect } from 'react';
import { adManager } from '@/lib/ad-manager';

export default function MiniAppLayout({ children }: { children: React.ReactNode }) {
  useEffect(() => {
    // ุนุฑุถ banner ูู ุฃุณูู ุงูุตูุญุฉ
    adManager.showBannerAd('bottom-banner-container');
  }, []);
  
  return (
    <div className="min-h-screen">
      {children}
      
      {/* Banner Container */}
      <div className="fixed bottom-0 left-0 right-0 flex justify-center bg-black/80 py-2">
        <div id="bottom-banner-container"></div>
      </div>
    </div>
  );
}
```

---

## ๐ ุงูุฎุทูุฉ 6: ููุญุฉ ุชุญูู ุงูุฃุฑุจุงุญ (Admin)

### 6.1 ุตูุญุฉ ุฃุฑุจุงุญ ุงูุฅุนูุงูุงุช

```typescript
// app/admin/ads/page.tsx

'use client';

import { useEffect, useState } from 'react';
import { Card } from '@/components/ui/card';
import { DollarSign, TrendingUp, Eye, Play } from 'lucide-react';

export default function AdminAdsPage() {
  const [stats, setStats] = useState({
    todayRevenue: 0,
    todayImpressions: 0,
    monthRevenue: 0,
    avgEcpm: 0
  });
  
  useEffect(() => {
    loadStats();
  }, []);
  
  const loadStats = async () => {
    const response = await fetch('/api/admin/ads/stats');
    const data = await response.json();
    
    if (data.success) {
      setStats(data.data);
    }
  };
  
  return (
    <div className="p-6">
      <h1 className="text-3xl font-bold mb-6">๐ ุฃุฑุจุงุญ ุงูุฅุนูุงูุงุช</h1>
      
      {/* Stats Grid */}
      <div className="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
        <Card className="p-6 bg-gradient-to-br from-green-600/20 to-emerald-600/20 border-green-500/50">
          <div className="flex items-center justify-between">
            <div>
              <p className="text-sm text-gray-400 mb-1">ุงูููู</p>
              <p className="text-3xl font-bold text-green-400">
                ${stats.todayRevenue.toFixed(2)}
              </p>
            </div>
            <DollarSign className="w-12 h-12 text-green-400/50" />
          </div>
        </Card>
        
        <Card className="p-6 bg-gradient-to-br from-blue-600/20 to-cyan-600/20 border-blue-500/50">
          <div className="flex items-center justify-between">
            <div>
              <p className="text-sm text-gray-400 mb-1">ุงููุดุงูุฏุงุช ุงูููู</p>
              <p className="text-3xl font-bold text-blue-400">
                {stats.todayImpressions.toLocaleString()}
              </p>
            </div>
            <Eye className="w-12 h-12 text-blue-400/50" />
          </div>
        </Card>
        
        <Card className="p-6 bg-gradient-to-br from-purple-600/20 to-pink-600/20 border-purple-500/50">
          <div className="flex items-center justify-between">
            <div>
              <p className="text-sm text-gray-400 mb-1">ูุฐุง ุงูุดูุฑ</p>
              <p className="text-3xl font-bold text-purple-400">
                ${stats.monthRevenue.toFixed(2)}
              </p>
            </div>
            <TrendingUp className="w-12 h-12 text-purple-400/50" />
          </div>
        </Card>
        
        <Card className="p-6 bg-gradient-to-br from-orange-600/20 to-red-600/20 border-orange-500/50">
          <div className="flex items-center justify-between">
            <div>
              <p className="text-sm text-gray-400 mb-1">ูุชูุณุท eCPM</p>
              <p className="text-3xl font-bold text-orange-400">
                ${stats.avgEcpm.toFixed(2)}
              </p>
            </div>
            <Play className="w-12 h-12 text-orange-400/50" />
          </div>
        </Card>
      </div>
      
      {/* Revenue Chart */}
      <Card className="p-6 mb-6">
        <h2 className="text-xl font-bold mb-4">ุงูุฃุฑุจุงุญ ุงูุดูุฑูุฉ</h2>
        {/* ุฅุถุงูุฉ Chart ููุง - ูููู ุงุณุชุฎุฏุงู recharts ุฃู chart.js */}
      </Card>
      
      {/* Breakdown by Ad Type */}
      <Card className="p-6">
        <h2 className="text-xl font-bold mb-4">ุงูุชูุตูู ุญุณุจ ููุน ุงูุฅุนูุงู</h2>
        {/* ุฌุฏูู ุชูุตููู */}
      </Card>
    </div>
  );
}
```

### 6.2 API ููุฅุญุตุงุฆูุงุช

```typescript
// app/api/admin/ads/stats/route.ts

import { NextRequest, NextResponse } from 'next/server';
import { prisma } from '@/lib/prisma';

export async function GET(req: NextRequest) {
  try {
    const today = new Date();
    today.setHours(0, 0, 0, 0);
    
    const thisMonth = new Date(today.getFullYear(), today.getMonth(), 1);
    
    // ูุดุงูุฏุงุช ุงูููู
    const todayViews = await prisma.adWatch.groupBy({
      by: ['adType'],
      where: {
        createdAt: { gte: today }
      },
      _count: true,
      _sum: {
        reward: true
      }
    });
    
    // ุญุณุงุจ ุงูุฃุฑุจุงุญ (ุชูุฑูุจู - ุจูุงุกู ุนูู eCPM ูุชูุณุท)
    const ecpmRates = {
      REWARDED_VIDEO: 12,      // $12 ููู 1000 ูุดุงูุฏุฉ
      INTERSTITIAL: 7,         // $7 ููู 1000 ูุดุงูุฏุฉ
      BANNER: 1                // $1 ููู 1000 ูุดุงูุฏุฉ
    };
    
    const todayRevenue = todayViews.reduce((sum, view) => {
      const revenue = (view._count / 1000) * ecpmRates[view.adType];
      return sum + revenue;
    }, 0);
    
    const todayImpressions = todayViews.reduce((sum, view) => sum + view._count, 0);
    
    // ุฃุฑุจุงุญ ุงูุดูุฑ
    const monthViews = await prisma.adWatch.groupBy({
      by: ['adType'],
      where: {
        createdAt: { gte: thisMonth }
      },
      _count: true
    });
    
    const monthRevenue = monthViews.reduce((sum, view) => {
      const revenue = (view._count / 1000) * ecpmRates[view.adType];
      return sum + revenue;
    }, 0);
    
    const avgEcpm = todayImpressions > 0 
      ? (todayRevenue / todayImpressions) * 1000 
      : 0;
    
    return NextResponse.json({
      success: true,
      data: {
        todayRevenue,
        todayImpressions,
        monthRevenue,
        avgEcpm,
        breakdown: todayViews
      }
    });
  } catch (error) {
    console.error('Error fetching ad stats:', error);
    return NextResponse.json({
      success: false,
      error: 'Failed to fetch stats'
    }, { status: 500 });
  }
}
```

---

## ๐ฏ ุงูุฎุทูุฉ 7: ุงูุงุฎุชุจุงุฑ

### 7.1 Test Mode

```typescript
// ุงุณุชุฎุฏู test ads ูู ุงูุจุฏุงูุฉ:
NEXT_PUBLIC_USE_TEST_ADS=true

// ุจุนุฏ ุงูุชุฃูุฏ ูู ุนูู ูู ุดูุกุ ุบููุฑูุง ุฅูู:
NEXT_PUBLIC_USE_TEST_ADS=false
```

### 7.2 ุณููุงุฑูููุงุช ุงูุงุฎุชุจุงุฑ

```
โ 1. ูุดุงูุฏุฉ Rewarded Video
   - ุงูุชุญ /mini-app/rewards
   - ุงุถุบุท "ุดุงูุฏ ุฅุนูุงู"
   - ุชุญูู ูู ุฅุถุงูุฉ ุงูููุงูุฃุฉ

โ 2. Interstitial ุจุนุฏ ุงููุนุจ
   - ุงูุนุจ 3 ูุฑุงุช
   - ูุฌุจ ุฃู ูุธูุฑ interstitial

โ 3. Banner ูู ุงูุฃุณูู
   - ุงูุชุญ ุฃู ุตูุญุฉ
   - ุชุญูู ูู ุธููุฑ banner

โ 4. ุญุฏ ุงููุดุงูุฏุงุช ุงููููู
   - ุดุงูุฏ 10 rewarded videos
   - ูุฌุจ ุฃู ูููุนู ูู ุงููุดุงูุฏุฉ ุงูู11

โ 5. ุงูุฅุญุตุงุฆูุงุช ูู Admin
   - ุงูุชุญ /admin/ads
   - ุชุญูู ูู ุงูุฃุฑูุงู
```

---

## ๐ธ ุงูุฎุทูุฉ 8: ุณุญุจ ุงูุฃุฑุจุงุญ ูู AdMob

### 8.1 ูุชุทูุจุงุช ุงูุณุญุจ

```
1. ุงููุตูู ุฅูู ุงูุญุฏ ุงูุฃุฏูู: $100
2. ุฅุถุงูุฉ ูุนูููุงุช ุงูุฏูุน ูู AdMob:
   - PayPal
   - ุฃู ุชุญููู ุจููู
3. ุงูุชุญูู ูู ุงููููุฉ (ุฅุฐุง ูุฒู ุงูุฃูุฑ)
```

### 8.2 ุงูุฌุฏูู ุงูุฒููู

```
- ุจุฏุงูุฉ ุงูุดูุฑ: AdMob ูุญุณุจ ุฃุฑุจุงุญ ุงูุดูุฑ ุงูุณุงุจู
- 15 ูู ุงูุดูุฑ: ุชุฃููุฏ ุงูุฃุฑุจุงุญ
- 21-26 ูู ุงูุดูุฑ: ูุชู ุงูุฏูุน
```

---

## ๐ ุงูุชููุนุงุช ูุงูุชุญุณูู

### ูุตุงุฆุญ ูุฒูุงุฏุฉ ุงูุฃุฑุจุงุญ:

```
1. โ ุฒูุงุฏุฉ ุนุฏุฏ ุงููุณุชุฎุฏููู ุงููุดุทูู
   - ุชุญุณูู SEO
   - ุญููุงุช ุชุณููููุฉ
   - ูุธุงู ุฅุญุงูุงุช ููู

2. โ ุชุญุณูู Placement
   - ุถุน rewarded ads ูู ุฃูุงูู ุงุณุชุฑุงุชูุฌูุฉ
   - interstitial ุจูู ุงูุตูุญุงุช ุงููููุฉ
   - banner ุฏุงุฆูุงู ูุฑุฆู

3. โ A/B Testing
   - ุฌุฑูุจ ููุงุถุน ูุฎุชููุฉ
   - ุฌุฑูุจ ููุงูุขุช ูุฎุชููุฉ (50 vs 100 vs 200)
   - ุฑุงูุจ retention rate

4. โ ุชุญุณูู User Experience
   - ูุง ุชูุซุฑ ูู ุงูุฅุนูุงูุงุช
   - rewarded ููุท = ุฃูุถู ุชุฌุฑุจุฉ
   - ุฏุน ุงููุณุชุฎุฏู ูุฎุชุงุฑ

5. โ ุงุณุชูุฏุงู ุฌุบุฑุงูู
   - USA/UK/Canada = ุฃุนูู eCPM ($15-$20)
   - GCC countries = ุฌูุฏ ($8-$12)
   - Tier 3 countries = ููุฎูุถ ($2-$4)
```

---

## โ ุงูุฎูุงุตุฉ - Checklist ูุงูู

```
โ ุฅูุดุงุก ุญุณุงุจ AdMob
โ ุฅูุดุงุก App ูู AdMob
โ ุฅูุดุงุก 3 Ad Units
โ ูุณุฎ ุฌููุน ุงูู IDs
โ ุฅุถุงูุฉ ูู .env
โ ุฅุถุงูุฉ AdWatch model ุฅูู Prisma
โ ุชุทุจูู prisma db push
โ ุฅูุดุงุก lib/ad-manager.ts
โ ุฅูุดุงุก RewardedAdButton component
โ ุฅูุดุงุก /api/ads/record
โ ุฅูุดุงุก /api/ads/claim-reward
โ ุฅูุดุงุก /api/ads/stats
โ ุฅุถุงูุฉ ูู /mini-app/rewards
โ ุฅุถุงูุฉ ูู /mini-app/games
โ ุฅุถุงูุฉ banner ูู layout
โ ุฅูุดุงุก /admin/ads/page.tsx
โ ุฅูุดุงุก /api/admin/ads/stats
โ ุงุฎุชุจุงุฑ ูู test mode
โ ุงูุชุจุฏูู ุฅูู production mode
โ ูุฑุงูุจุฉ ุงูุฃุฑุจุงุญ!
```

---

**๐ ุชูุงูููุง!** 

ุงูุขู ูุฏูู ูุธุงู ุฅุนูุงูุงุช ูุงูู ูุน ุชุชุจุน ุงูุฃุฑุจุงุญ!

**ุงููุชููุน:**
- ูุน 1000 ูุณุชุฎุฏู ูุดุท: $1,200-$2,250/ุดูุฑ
- ูุน 10,000 ูุณุชุฎุฏู: $12,000-$22,500/ุดูุฑ
- ูุน 100,000 ูุณุชุฎุฏู: $120,000-$225,000/ุดูุฑ ๐ฐ

**ุงูููู ุงูุชุงูู:** ุณุฃุจุฏุฃ ุงูุขู ุจุชุทุจูู ุงูููุฒุงุช ุงููุงูุตุฉ!
