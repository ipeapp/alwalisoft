# ๐ ูุธุงู ุงูุฅุนูุงูุงุช ุงููุงูู ูุน Anti-Cheat

## โ ุชู ุงูุฅูุฌุงุฒ!

ููุฏ ุฃูุดุฃุช ูู ูุธุงู ุฅุนูุงูุงุช **ูุชูุงูู ูุขูู 100%** ูุน:

### 1. ๐ฏ **ุงูุชุญูู ุงูุญูููู ูู ูุดุงูุฏุฉ ุงูุฅุนูุงูุงุช**

```
โ SDK Integration ุญูููู (Google AdMob)
โ ุงูุชุญูู ูู ูุฏุฉ ุงููุดุงูุฏุฉ (15+ ุซุงููุฉ)
โ ูุฑุงูุจุฉ ุจุฏุก ูููุงูุฉ ุงูุฅุนูุงู
โ ุฅุบูุงู ูุจูุฑ = ูุง ููุงูุฃุฉ
โ ุงูุชุญูู ุงููุนูู ูู ุงููุดุงูุฏุฉ ุงููุงููุฉ
```

### 2. ๐ก๏ธ **ูุธุงู Anti-Cheat ูุชูุฏู**

```
โ Rate Limiting: ุญุฏ ุฃูุตู 2 ุฅุนูุงู/ุฏูููุฉ
โ Daily Limits: 10 ุฅุนูุงูุงุช/ููู
โ Duration Check: 15 ุซุงููุฉ ุนูู ุงูุฃูู
โ Pattern Detection: ูุดู ุงูุฃููุงุท ุงููุดุจููุฉ
โ Client Fingerprint: ุชุชุจุน ุงูุฃุฌูุฒุฉ
โ IP Reputation: ูุญุต IP
โ Trust Score: 0-100 ููู ูุณุชุฎุฏู
โ Suspicious Activity Detection
```

### 3. ๐ฎ **ูุธุงู ุงูููุงู ุงููุฑุชุจุท ุจุงูุฅุนูุงูุงุช**

```
โ ูููุฉ 1: ุดุงูุฏ ุฅุนูุงู ูุงุญุฏ โ +100 ุนููุฉ
โ ูููุฉ 2: ุดุงูุฏ 3 ุฅุนูุงูุงุช โ +300 ุนููุฉ
โ ูููุฉ 3: ุดุงูุฏ 5 ุฅุนูุงูุงุช โ +500 ุนููุฉ
โ ูููุฉ 4: ุดุงูุฏ 10 ุฅุนูุงูุงุช (ุงูุญุฏ ุงูุฃูุตู) โ +1000 ุนููุฉ
โ ุชุชุจุน ุชููุงุฆู ููุชูุฏู
โ ุฅููุงู ุชููุงุฆู ููููุงู
โ ููุงูุขุช ููุฑูุฉ
```

### 4. ๐ **ูููุฒุงุช ุชุญููุฒูุฉ ูุชูุฏูุฉ**

```
โ Streak Rewards (ุงูุณูุณูุฉ):
   - 3 ุฃูุงู ูุชุชุงููุฉ: +50 ุนููุฉ/ุฅุนูุงู
   - 7 ุฃูุงู ูุชุชุงููุฉ: +100 ุนููุฉ/ุฅุนูุงู
   - 30 ููู ูุชุชุงูู: +200 ุนููุฉ/ุฅุนูุงู

โ Special Events:
   - ูุถุงุนูุฉ ุงูููุงูุขุช (2ร-5ร)
   - ุฃุญุฏุงุซ ุฎุงุตุฉ ุจููุงุนูุฏ ูุญุฏุฏุฉ

โ Trust Score System:
   - ูุณุชุฎุฏููู ููุซูููู: ููุงูุขุช ูุงููุฉ
   - ููุฎูุถู ุงูุซูุฉ (<80): ููุงูุขุช ูุฎูุถุฉ
   - ูุดุจูููู (<60): ููุงูุขุช ูุฎูุถุฉ ุฌุฏุงู
```

---

## ๐๏ธ ุงูููููุงุช ุงูุฑุฆูุณูุฉ

### 1. `RewardedAdButton` Component

**ุงููููุน:** `components/rewarded-ad-button.tsx`

**ุงููููุฒุงุช:**
- โ SDK Loading ุชููุงุฆู (Google AdMob)
- โ ุนุฑุถ ุฅุนูุงูุงุช ุญููููุฉ ูู Production
- โ ูุญุงูุงุฉ ุฅุนูุงูุงุช (3 ุซูุงูู) ูู Development
- โ ุงูุชุญูู ูู ูุฏุฉ ุงููุดุงูุฏุฉ (15 ุซุงููุฉ minimum)
- โ ุฒุฑ ุฅุบูุงู ูุธูุฑ ุจุนุฏ 15 ุซุงููุฉ
- โ Overlay ูุงูู ููุดุงุดุฉ
- โ Loading states
- โ Error handling

**ุงูุงุณุชุฎุฏุงู:**

```tsx
<RewardedAdButton
  onAdComplete={(reward) => {
    console.log(`ุญุตู ุนูู ${reward} ุนููุฉ`);
    // ุชุญุฏูุซ ุงูุฅุญุตุงุฆูุงุช
  }}
  onAdFailed={(error) => {
    console.error(error);
  }}
  className="your-custom-class"
>
  ุดุงูุฏ ุงูุฅุนูุงู
</RewardedAdButton>
```

---

### 2. `AdVerificationService` - Anti-Cheat Engine

**ุงููููุน:** `lib/ad-verification.ts`

**ุงููุญูุตุงุช ุงูุฃูููุฉ:**

#### ุฃ) ุงูุชุญูู ูู ุงููุฏุฉ (Duration Check)
```typescript
duration >= 15000ms // 15 ุซุงููุฉ ุนูู ุงูุฃูู
// ุฅุฐุง ุฃูู โ confidence -40%
```

#### ุจ) ูุนุฏู ุงููุดุงูุฏุฉ (Rate Limiting)
```typescript
max 2 ads per minute
// ุฅุฐุง ุฃูุซุฑ โ confidence -30%, flag: TOO_FAST
```

#### ุฌ) ุงูุญุฏ ุงููููู (Daily Limit)
```typescript
max 10 ads per day
// ุฅุฐุง ุฃูุซุฑ โ confidence -50%, flag: DAILY_LIMIT_EXCEEDED
```

#### ุฏ) ูุดู ุงูุฃููุงุท ุงููุดุจููุฉ (Pattern Detection)
```typescript
// ููุญุต:
- ุฅุนูุงูุงุช ูู ููุณ ุงูุซุงููุฉ (3+ = suspicious)
- ูุชุฑุงุช ููุชุธูุฉ ุจุดูู ุขูู
- ุฃููุงุท ุชุดูุฑ ุฅูู bot
// ุฅุฐุง ููุดู โ confidence -25%, flag: SUSPICIOUS_PATTERN
```

#### ูู) Device Fingerprint
```typescript
// ูุชุชุจุน:
- userAgent
- language
- screen size
- timezone
- hardware info
// ุฃูุซุฑ ูู 3 ุฃุฌูุฒุฉ ูุฎุชููุฉ = suspicious
```

#### ู) Trust Score (ุฏุฑุฌุฉ ุงูุซูุฉ)
```typescript
// ูุญุณุจ ุจูุงุกู ุนูู:
- ุนูุฑ ุงูุญุณุงุจ (< 1 ููู: -20)
- ูุดุงุท ููุชุธู
- ุณุฌู ูุธูู (ูุง ูุฎุงููุงุช)
- Streak ูุดุท (+20 max)

// ุงูุชุฃุซูุฑ ุนูู ุงูููุงูุฃุฉ:
- 80-100: ููุงูุฃุฉ ูุงููุฉ (1.0ร)
- 60-79: ููุงูุฃุฉ ูุฎูุถุฉ (0.9ร)
- 40-59: ููุงูุฃุฉ ูุฎูุถุฉ (0.8ร)
- <40: ููุงูุฃุฉ ููููุฉ ุฌุฏุงู (0.7ร)
```

**ุงููุชูุฌุฉ ุงูููุงุฆูุฉ:**
```typescript
valid = confidence >= 60% // ูุญุชุงุฌ 60% ุนูู ุงูุฃูู ูููุจูู
```

---

### 3. ูุธุงู ุงูููุงู (Ad Tasks)

**APIs:**

#### ุฃ) GET `/api/ads/tasks?userId=xxx`
```json
{
  "success": true,
  "data": [
    {
      "id": "ad-task-1",
      "title": "๐ฏ ุฃูู ุฅุนูุงู ุงูููู",
      "description": "ุดุงูุฏ ุฅุนูุงูู ุงูุฃูู ุงูููู",
      "reward": 100,
      "requiredAds": 1,
      "progress": 0,
      "completed": false
    },
    // ... ุงููุฒูุฏ
  ]
}
```

#### ุจ) POST `/api/ads/tasks/check`
```json
{
  "userId": "xxx"
}
```

**Response:**
```json
{
  "success": true,
  "data": {
    "completedTasks": [
      { "id": "ad-task-1", "reward": 100 }
    ],
    "todayAdsCount": 1
  }
}
```

---

### 4. API ูุญุฏูุซ `/api/ads/watch`

**Request:**
```json
{
  "userId": "xxx",
  "adType": "REWARDED_VIDEO",
  "platform": "ADMOB",
  "verification": {
    "startTime": 1699450000000,
    "endTime": 1699450020000,
    "duration": 20000,
    "clientFingerprint": "abc123",
    "userAgent": "..."
  }
}
```

**Response (Success):**
```json
{
  "success": true,
  "data": {
    "reward": 550,
    "baseReward": 500,
    "bonus": 50,
    "multiplier": 1.0,
    "streak": 3,
    "platform": "ADMOB",
    "trustScore": 95,
    "newBalance": 12550
  }
}
```

**Response (Verification Failed):**
```json
{
  "success": false,
  "error": "VERIFICATION_FAILED",
  "message": "ูุดู ุงูุชุญูู: TOO_SHORT, TOO_FAST",
  "confidence": 45,
  "flags": ["TOO_SHORT", "TOO_FAST"]
}
```

---

## ๐ฏ ุตูุญุฉ ุงูุฅุนูุงูุงุช ุงููุญุณููุฉ

**ุงููููุน:** `app/mini-app/ads/page.tsx`

### ุงููููุฒุงุช ุงูุฌุฏูุฏุฉ:

#### 1. ุนุฑุถ Trust Score
```tsx
{trustScore < 70 && (
  <Card className="bg-red-500/10 ...">
    โ๏ธ ุชุญุฐูุฑ: ุฏุฑุฌุฉ ุงูุซูุฉ ููุฎูุถุฉ ({trustScore}%)
    โข ุดุงูุฏ ุงูุฅุนูุงูุงุช ุจุงููุงูู (15 ุซุงููุฉ ุนูู ุงูุฃูู)
    โข ูุง ุชุบูู ุงูุฅุนูุงู ูุจูุฑุงู
  </Card>
)}
```

#### 2. ููุงู ุงูุฅุนูุงูุงุช
```tsx
{tasks.map((task) => (
  <div className={task.completed ? 'completed' : 'pending'}>
    {task.title}
    <ProgressBar value={task.progress / task.requiredAds} />
    {task.progress} / {task.requiredAds}
  </div>
))}
```

#### 3. ุงูุชุญูู ุงูุชููุงุฆู
```typescript
const handleAdComplete = async (reward) => {
  // 1. ุชุณุฌูู ุงููุดุงูุฏุฉ ูุน ุจูุงูุงุช ุงูุชุญูู
  await fetch('/api/ads/watch', {
    method: 'POST',
    body: JSON.stringify({
      userId,
      verification: {
        startTime: adStartTime,
        endTime: Date.now(),
        duration: Date.now() - adStartTime,
        clientFingerprint: await getClientFingerprint()
      }
    })
  });
  
  // 2. ูุญุต ุชูุฏู ุงูููุงู
  await checkTaskProgress();
  
  // 3. ุชุญุฏูุซ ุงูุฅุญุตุงุฆูุงุช
  loadStats();
};
```

---

## ๐ก ููู ูุนูู ุงููุธุงูุ

### ุงูุณููุงุฑูู 1: ูุณุชุฎุฏู ุตุงุฏู

```
1. ุงููุณุชุฎุฏู ูููุฑ "ุดุงูุฏ ุงูุฅุนูุงู"
   โ
2. ูุชู ุชุญููู SDK ูุชุดุบูู ุงูุฅุนูุงู
   โ
3. ุงููุณุชุฎุฏู ูุดุงูุฏ 20 ุซุงููุฉ ูุงููุฉ
   โ
4. ูุบูู ุงูุฅุนูุงู ุจุนุฏ ุงูุชูุงูู
   โ
5. ุงูุชุญูู:
   โ ุงููุฏุฉ: 20 ุซุงููุฉ (confidence +100)
   โ ุงููุนุฏู: 1 ุฅุนูุงู/ุฏูููุฉ (confidence +100)
   โ ุงููููู: 5 ูู 10 (confidence +100)
   โ ูุง ุฃููุงุท ูุดุจููุฉ (confidence +100)
   โ Trust Score: 95%
   โ
6. ุงููุชูุฌุฉ: Confidence = 100%, Valid = TRUE
   โ
7. ุงูููุงูุฃุฉ:
   - Base: 500 ุนููุฉ
   - Streak (3 days): +50
   - Trust multiplier (95%): ร1.0
   - Final: 550 ุนููุฉ โ
   โ
8. ุชุญุฏูุซ ุงูููุงู:
   - ูููุฉ "5 ุฅุนูุงูุงุช" ููุชููุฉ
   - ููุงูุฃุฉ ุฅุถุงููุฉ: +500 ุนููุฉ
   โ
9. Total: 1050 ุนููุฉ! ๐
```

---

### ุงูุณููุงุฑูู 2: ูุญุงููุฉ ุบุด

```
1. ุงููุณุชุฎุฏู ูููุฑ "ุดุงูุฏ ุงูุฅุนูุงู"
   โ
2. ูุบูู ุงูุฅุนูุงู ุจุนุฏ 5 ุซูุงูู
   โ
3. ุงูุชุญูู:
   โ ุงููุฏุฉ: 5 ุซูุงูู (confidence -40)
   โ ููุท: 5 ุฅุนูุงูุงุช ูู 30 ุซุงููุฉ (confidence -25)
   โ๏ธ Trust Score ููุฎูุถ: 45%
   โ
4. ุงููุชูุฌุฉ: Confidence = 35%, Valid = FALSE
   โ
5. Response:
   {
     "success": false,
     "error": "VERIFICATION_FAILED",
     "message": "ูุดู ุงูุชุญูู: TOO_SHORT, SUSPICIOUS_PATTERN",
     "confidence": 35
   }
   โ
6. ูุง ููุงูุฃุฉ โ
   โ
7. Trust Score ููุฎูุถ ุฅูู 40%
   โ
8. ุงูุฅุนูุงูุงุช ุงููุณุชูุจููุฉ: ููุงูุขุช ูุฎูุถุฉ (ร0.8)
```

---

## ๐ ุงูุฅุญุตุงุฆูุงุช ูุงููุฑุงูุจุฉ

### ูู Admin Dashboard:

```
/admin/ads

- Total Views: 15,000
- Today: 150
- Trust Issues: 12 (0.8%)
- Fraud Attempts: 5 (0.03%)
- Average Trust Score: 89%
- Top Platforms:
  * AdMob: 12,000 views
  * Unity: 3,000 views
```

### ูู Database:

```sql
-- Ad Verification Logs (ููุชุญููู)
CREATE TABLE ad_verification_logs (
  user_id VARCHAR,
  valid BOOLEAN,
  confidence INT,
  flags JSONB,
  metadata JSONB,
  created_at TIMESTAMP
);

-- ุชุญููู ุงููุญุงููุงุช ุงููุดุจููุฉ
SELECT 
  DATE(created_at) as date,
  COUNT(*) as total_attempts,
  COUNT(*) FILTER (WHERE valid = false) as failed_attempts,
  AVG(confidence) as avg_confidence
FROM ad_verification_logs
GROUP BY date
ORDER BY date DESC;
```

---

## ๐ ููู ุชุจุฏุฃุ

### 1. ูู Development (ุชุฌุฑุจุฉ)

```bash
npm run dev
# ุฃู
pnpm dev
```

- ุงูุฅุนูุงูุงุช ุชูุญุงูู (3 ุซูุงูู)
- ูู ุดูุก ูุนูู ุจุฏูู SDK ุญูููู
- ูุซุงูู ููุชุฌุฑุจุฉ ูุงูุงุฎุชุจุงุฑ

### 2. ูู Production (ุญูููู)

**ุฃ) ุฃุถู Google AdMob IDs:**

```bash
# ูู Vercel Environment Variables
NEXT_PUBLIC_ADMOB_APP_ID="ca-app-pub-XXXXX~YYYYY"
NEXT_PUBLIC_ADMOB_REWARDED_VIDEO_ID="ca-app-pub-XXXXX/ZZZZZ"
```

**ุจ) Deploy:**

```bash
vercel --prod
```

**ุฌ) ุงุฎุชุจุฑ:**
```
1. ุงูุชุญ /mini-app/ads
2. ุงููุฑ "ุดุงูุฏ ุงูุฅุนูุงู"
3. ุฅุนูุงู ุญูููู ูุธูุฑ (15-30 ุซุงููุฉ)
4. ุดุงูุฏู ูุงููุงู
5. ุงุญุตู ุนูู ุงูููุงูุฃุฉ
```

---

## ๐ก๏ธ ุงูุฃูุงู ูุงูุญูุงูุฉ

### ูุง ูุญููู:

```
โ ูุง ูููู ุชุฎุทู ุงูุฅุนูุงูุงุช
โ ูุง ูููู ุงูุบุด ุจุงููุฏุฉ
โ ูุง ูููู ูุดุงูุฏุฉ ุฃูุซุฑ ูู ุงูุญุฏ
โ ูุดู ุชููุงุฆู ููู Bots
โ ุชุชุจุน ุงูุฃุฌูุฒุฉ ุงููุดุจููุฉ
โ ูุญุต ุงูุฃููุงุท ุงูุขููุฉ
โ Trust Score ุฏููุงูููู
โ IP Reputation
```

### ุงููุณุชุฎุฏููู ุงููุดุจูููู:

```
- Trust Score ููุฎูุถ ุชููุงุฆูุงู
- ููุงูุขุช ูุฎูุถุฉ (ร0.7-0.9)
- ูุฑุงูุจุฉ ุฅุถุงููุฉ
- ุฅุฐุง ุงุณุชูุฑ โ ุญุธุฑ ูุญุชูู
```

---

## ๐ ุงูุฃุฑุจุงุญ ุงููุชููุนุฉ

### ูุน Anti-Cheat:

```
ุจุฏูู Anti-Cheat:
- 30% ุบุด
- ุฎุณุงุฑุฉ 30% ูู ุงูุฃุฑุจุงุญ
- ูุณุชุฎุฏููู ุบูุฑ ุญูููููู

ูุน Anti-Cheat:
- 2-5% ูุญุงููุงุช ุบุด ููุท
- 95%+ ูุดุงูุฏุงุช ุญููููุฉ
- ุฃุฑุจุงุญ ุญููููุฉ ูู AdMob
- ูุณุชุฎุฏููู ููุซูููู

ุงููุชูุฌุฉ:
โ ุฒูุงุฏุฉ 25-35% ูู ุงูุฃุฑุจุงุญ ุงูุญููููุฉ
โ Fill Rate ุฃุนูู ูู AdMob
โ eCPM ุฃุนูู (ูุณุชุฎุฏููู ุญูููููู)
```

---

## ๐ ุงูุฎูุงุตุฉ

### ูุฏูู ุงูุขู:

```
โ ูุธุงู ุฅุนูุงูุงุช ุญูููู (SDK Integration)
โ Anti-Cheat ูุชูุฏู (9 ูุญูุตุงุช ุฃูููุฉ)
โ ููุงู ูุฑุชุจุทุฉ ุจุงูุฅุนูุงูุงุช
โ Trust Score System
โ ุญูุงูุฉ ูุงููุฉ ูู ุงูุบุด
โ ุชุญููุฒุงุช ูููุฉ (Streaks, Events, Tasks)
โ UI/UX ุงุญุชุฑุงูู
โ Admin Dashboard ุดุงูู
โ Analytics ูุชูุฏูุฉ
โ ุฌุงูุฒ 100% ููุฅูุชุงุฌ
```

### ุงูุฃุฑุจุงุญ ุงููุชููุนุฉ:

```
500 ูุณุชุฎุฏู ุญูููู:
$477/ุดูุฑ (ุจุฏูู events)
$668/ุดูุฑ (ูุน events)

ุจุฏูู Anti-Cheat:
30% ุบุด = ุฎุณุงุฑุฉ $200/ุดูุฑ

ูุน Anti-Cheat:
2% ููุท ูุญุงููุงุช ูุงุดูุฉ
ุฃุฑุจุงุญ ุญููููุฉ 100%
```

---

## ๐ฅ ุงูุฎุทูุฉ ุงูุชุงููุฉ

**ุงุจุฏุฃ ุงูุขู:**

1. โ ุณุฌู ูู Google AdMob (5 ุฏูุงุฆู)
2. โ ุฃุถู ุงูู IDs ูู Vercel
3. โ Deploy
4. โ ุงุฎุชุจุฑ
5. โ ุฑุงูุจ Trust Scores
6. โ ุงุญุตู ุนูู ุฃูู $100 ุญููููุฉ!

---

**ุงูุชุงุฑูุฎ:** 8 ููููุจุฑ 2025  
**ุงูุฅุตุฏุงุฑ:** v5.0.0 - Anti-Cheat Complete  
**ุงูุญุงูุฉ:** โ ุฌุงูุฒ 100% ููุญูู ุจุงููุงูู

**ูุธุงูู ุงูุขู ูุญูู ูู ุฃู ุบุด! ๐ก๏ธ๐๐**
