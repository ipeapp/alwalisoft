# ğŸ‰ Ù†Ø¸Ø§Ù… Ø¨ÙˆØª ØªÙŠÙ„ÙŠØ¬Ø±Ø§Ù… Ù„Ù„Ù…Ù‡Ø§Ù… ÙˆØ§Ù„Ù…ÙƒØ§ÙØ¢Øª - Ø§Ù„ÙˆØ«Ø§Ø¦Ù‚ Ø§Ù„Ø´Ø§Ù…Ù„Ø©

## ğŸ“‹ Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ù…Ø­ØªÙˆÙŠØ§Øª

1. [Ù†Ø¸Ø±Ø© Ø¹Ø§Ù…Ø©](#Ù†Ø¸Ø±Ø©-Ø¹Ø§Ù…Ø©)
2. [Ø§Ù„Ø¹Ù…Ø§Ø±Ø© Ø§Ù„ØªÙ‚Ù†ÙŠØ©](#Ø§Ù„Ø¹Ù…Ø§Ø±Ø©-Ø§Ù„ØªÙ‚Ù†ÙŠØ©)
3. [Ø¯Ù„ÙŠÙ„ Ø§Ù„ØªØ«Ø¨ÙŠØª](#Ø¯Ù„ÙŠÙ„-Ø§Ù„ØªØ«Ø¨ÙŠØª)
4. [Ø§Ù„Ø¨Ù†ÙŠØ© ÙˆØ§Ù„Ù…ÙƒÙˆÙ†Ø§Øª](#Ø§Ù„Ø¨Ù†ÙŠØ©-ÙˆØ§Ù„Ù…ÙƒÙˆÙ†Ø§Øª)
5. [ÙˆØ§Ø¬Ù‡Ø§Øª API](#ÙˆØ§Ø¬Ù‡Ø§Øª-api)
6. [ØªØ¯ÙÙ‚Ø§Øª Ø§Ù„Ø¨ÙˆØª](#ØªØ¯ÙÙ‚Ø§Øª-Ø§Ù„Ø¨ÙˆØª)
7. [Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª](#Ù‚Ø§Ø¹Ø¯Ø©-Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª)
8. [Ø§Ù„Ø£Ù…Ø§Ù†](#Ø§Ù„Ø£Ù…Ø§Ù†)
9. [Ø§Ù„Ù†Ø´Ø±](#Ø§Ù„Ù†Ø´Ø±)
10. [Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª](#Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª)
11. [Ø§Ù„ØµÙŠØ§Ù†Ø©](#Ø§Ù„ØµÙŠØ§Ù†Ø©)
12. [Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø§Ù„Ø´Ø§Ø¦Ø¹Ø©](#Ø§Ù„Ø£Ø³Ø¦Ù„Ø©-Ø§Ù„Ø´Ø§Ø¦Ø¹Ø©)

---

## Ù†Ø¸Ø±Ø© Ø¹Ø§Ù…Ø©

### Ù…Ø§ Ù‡Ùˆ Ù‡Ø°Ø§ Ø§Ù„Ù†Ø¸Ø§Ù…ØŸ

Ù†Ø¸Ø§Ù… Ù…ØªÙƒØ§Ù…Ù„ Ù„Ø¨ÙˆØª ØªÙŠÙ„ÙŠØ¬Ø±Ø§Ù… ÙŠØªÙŠØ­ Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†:
- âœ… Ø¥ÙƒÙ…Ø§Ù„ Ù…Ù‡Ø§Ù… ÙŠÙˆÙ…ÙŠØ© ÙˆØ®Ø§ØµØ©
- ğŸ’° ÙƒØ³Ø¨ Ø¹Ù…Ù„Ø© Ø§ÙØªØ±Ø§Ø¶ÙŠØ© Ù‚Ø§Ø¨Ù„Ø© Ù„Ù„ØªØ­ÙˆÙŠÙ„ Ø¥Ù„Ù‰ USDT
- ğŸ‘¥ Ø¯Ø¹ÙˆØ© Ø§Ù„Ø£ØµØ¯Ù‚Ø§Ø¡ ÙˆØ§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ù…ÙƒØ§ÙØ¢Øª Ù…ØªØ¹Ø¯Ø¯Ø© Ø§Ù„Ù…Ø³ØªÙˆÙŠØ§Øª (3 Ù…Ø³ØªÙˆÙŠØ§Øª)
- ğŸ® Ù„Ø¹Ø¨ Ø£Ù„Ø¹Ø§Ø¨ Ù…ØµØºØ±Ø© ÙˆÙƒØ³Ø¨ Ù…ÙƒØ§ÙØ¢Øª Ø¥Ø¶Ø§ÙÙŠØ©
- ğŸƒ Ø¬Ù…Ø¹ Ø¨Ø·Ø§Ù‚Ø§Øª Ù†Ø§Ø¯Ø±Ø© ÙˆØ§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ù…Ø²Ø§ÙŠØ§ Ø­ØµØ±ÙŠØ©
- ğŸ’³ Ø³Ø­Ø¨ Ø§Ù„Ø£Ø±Ø¨Ø§Ø­ Ø¹Ø¨Ø± USDT (TRC20)
- ğŸ“Š ØªØªØ¨Ø¹ Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª ÙˆØ§Ù„Ø£Ø¯Ø§Ø¡

### Ø§Ù„Ù…Ù…ÙŠØ²Ø§Øª Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©

#### 1. Ù†Ø¸Ø§Ù… Ø§Ù„Ù…Ù‡Ø§Ù… Ø§Ù„Ù…ØªÙ‚Ø¯Ù…
- Ù…Ù‡Ø§Ù… ÙŠÙˆÙ…ÙŠØ© ÙˆØ£Ø³Ø¨ÙˆØ¹ÙŠØ© ÙˆØ®Ø§ØµØ©
- ØªØµÙ†ÙŠÙØ§Øª Ù…ØªØ¹Ø¯Ø¯Ø© (Ù‚Ù†ÙˆØ§ØªØŒ Ù…Ø¬Ù…ÙˆØ¹Ø§ØªØŒ ÙÙŠØ¯ÙŠÙˆÙ‡Ø§ØªØŒ ØªÙØ§Ø¹Ù„ØŒ Ø¥Ù„Ø®)
- Ù†Ø¸Ø§Ù… ØªØ­Ù‚Ù‚ ØªÙ„Ù‚Ø§Ø¦ÙŠ Ù…Ù† Ø¥ÙƒÙ…Ø§Ù„ Ø§Ù„Ù…Ù‡Ø§Ù…
- Ù…ÙƒØ§ÙØ¢Øª Ù…ØªØ¯Ø±Ø¬Ø© Ø­Ø³Ø¨ Ø§Ù„ØµØ¹ÙˆØ¨Ø©
- Ù…Ù‡Ø§Ù… Ù…Ø­Ø¯ÙˆØ¯Ø© Ø§Ù„ÙˆÙ‚Øª (Flash Tasks)

#### 2. Ù†Ø¸Ø§Ù… Ø§Ù„Ø¥Ø­Ø§Ù„Ø§Øª Ù…ØªØ¹Ø¯Ø¯ Ø§Ù„Ù…Ø³ØªÙˆÙŠØ§Øª
- **Ø§Ù„Ù…Ø³ØªÙˆÙ‰ 1 (Ù…Ø¨Ø§Ø´Ø±)**: 1,000 Ø¹Ù…Ù„Ø© + 10% Ø¹Ù…ÙˆÙ„Ø© Ù…Ù† Ø£Ø±Ø¨Ø§Ø­ Ø§Ù„Ù…Ø­Ø§Ù„
- **Ø§Ù„Ù…Ø³ØªÙˆÙ‰ 2**: 500 Ø¹Ù…Ù„Ø© + 5% Ø¹Ù…ÙˆÙ„Ø©
- **Ø§Ù„Ù…Ø³ØªÙˆÙ‰ 3**: 250 Ø¹Ù…Ù„Ø© + 2% Ø¹Ù…ÙˆÙ„Ø©
- Ù…ÙƒØ§ÙØ¢Øª ØªØ³Ø¬ÙŠÙ„ ÙÙˆØ±ÙŠØ© Ù„Ù„Ø·Ø±ÙÙŠÙ†
- Ù„ÙˆØ­Ø© Ù…ØªØµØ¯Ø±ÙŠÙ† Ù„Ù„Ø£ÙØ¶Ù„ ÙÙŠ Ø§Ù„Ø¥Ø­Ø§Ù„Ø§Øª

#### 3. Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨ Ø§Ù„Ù…ØµØºØ±Ø©
- **Ø§Ø¶Ø±Ø¨ Ø§Ù„Ù‡Ø¯Ù**: ÙØ±ØµØ© Ø±Ø¨Ø­ Ø­ØªÙ‰ 5,000 Ø¹Ù…Ù„Ø© (3 Ù…Ø­Ø§ÙˆÙ„Ø§Øª ÙŠÙˆÙ…ÙŠØ§Ù‹)
- **Ø¹Ø¬Ù„Ø© Ø§Ù„Ø­Ø¸**: Ø¬ÙˆØ§Ø¦Ø² ØªØµÙ„ Ø¥Ù„Ù‰ 10,000 Ø¹Ù…Ù„Ø© (Ù…Ø­Ø§ÙˆÙ„Ø© ÙˆØ§Ø­Ø¯Ø© ÙŠÙˆÙ…ÙŠØ§Ù‹)
- **ØªØ­Ø¯ÙŠ Ø§Ù„Ø£Ø³Ø¦Ù„Ø©**: Ù…Ø³Ø§Ø¨Ù‚Ø§Øª Ù…Ø¹Ø±ÙÙŠØ© Ø¨Ù…ÙƒØ§ÙØ¢Øª Ø¶Ø®Ù…Ø© (Ù…Ø­Ø§ÙˆÙ„ØªØ§Ù† ÙŠÙˆÙ…ÙŠØ§Ù‹)
- **Ø¨Ø·ÙˆÙ„Ø§Øª Ø£Ø³Ø¨ÙˆØ¹ÙŠØ©**: Ù…Ù†Ø§ÙØ³Ø§Øª Ù…Ø¹ Ø¬ÙˆØ§Ø¦Ø² ÙƒØ¨Ø±Ù‰ (Ù‚Ø±ÙŠØ¨Ø§Ù‹)

#### 4. Ù†Ø¸Ø§Ù… Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª ÙˆØ§Ù„Ø¬ÙˆØ§Ù‡Ø±
- Ø¨Ø·Ø§Ù‚Ø§Øª Ø¨Ø®Ù…Ø³ Ø¯Ø±Ø¬Ø§Øª Ù†Ø¯Ø±Ø© (Common â†’ Legendary)
- ÙƒÙ„ Ø¨Ø·Ø§Ù‚Ø© ØªÙ…Ù†Ø­ Ù†Ø³Ø¨Ø© Ù…ÙƒØ§ÙØ£Ø© Ø¥Ø¶Ø§ÙÙŠØ© (5% â†’ 50%)
- Ø¬ÙˆØ§Ù‡Ø± Ù„Ù„Ø§Ø³ØªØ¨Ø¯Ø§Ù„ Ø¨Ù…ÙƒØ§ÙØ¢Øª Ø®Ø§ØµØ©
- Ù…ØªØ¬Ø± Ù„Ø´Ø±Ø§Ø¡ ÙˆØ¨ÙŠØ¹ Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª (Marketplace - Ù‚Ø±ÙŠØ¨Ø§Ù‹)
- Ø£Ù„Ø¨ÙˆÙ… ØªÙØ§Ø¹Ù„ÙŠ Ù„Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø©

#### 5. Ù†Ø¸Ø§Ù… Ø§Ù„Ù…Ø³ØªÙˆÙŠØ§Øª ÙˆØ§Ù„Ø±ØªØ¨
- **Ù…Ø¨ØªØ¯Ø¦ (Beginner)**: Ø§Ù„Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ
- **Ù…Ø­ØªØ±Ù (Professional)**: Ù…Ø²Ø§ÙŠØ§ Ø¥Ø¶Ø§ÙÙŠØ© ÙˆÙØ±Øµ Ø£ÙØ¶Ù„
- **Ø®Ø¨ÙŠØ± (Expert)**: Ù…Ù‡Ø§Ù… Ø­ØµØ±ÙŠØ© ÙˆÙ…ÙƒØ§ÙØ¢Øª Ù…Ø¶Ø§Ø¹ÙØ©
- **VIP**: Ø£ÙØ¶Ù„ Ø§Ù„Ù…Ø²Ø§ÙŠØ§ØŒ Ø¯Ø¹Ù… Ø®Ø§ØµØŒ Ø¹Ø±ÙˆØ¶ Ø­ØµØ±ÙŠØ©

#### 6. Ù†Ø¸Ø§Ù… Ø§Ù„Ø³Ø­ÙˆØ¨Ø§Øª Ø§Ù„Ø¢Ù…Ù†
- Ø­Ø¯ Ø£Ø¯Ù†Ù‰: 5,000,000 Ø¹Ù…Ù„Ø© (5 USDT)
- Ù…Ø¹Ø¯Ù„ Ø§Ù„ØªØ­ÙˆÙŠÙ„: 1,000,000 Ø¹Ù…Ù„Ø© = 1 USDT
- Ø§Ù„Ø´Ø¨ÙƒØ©: TRC20 (Ø±Ø³ÙˆÙ… Ù…Ù†Ø®ÙØ¶Ø©)
- Ù…Ø¹Ø§Ù„Ø¬Ø© Ø®Ù„Ø§Ù„ 24-48 Ø³Ø§Ø¹Ø©
- ØªØªØ¨Ø¹ ÙƒØ§Ù…Ù„ Ù„Ø­Ø§Ù„Ø© Ø§Ù„Ø³Ø­Ø¨

---

## Ø§Ù„Ø¹Ù…Ø§Ø±Ø© Ø§Ù„ØªÙ‚Ù†ÙŠØ©

### Ø§Ù„Ù…ÙƒØ¯Ø³ Ø§Ù„ØªÙ‚Ù†ÙŠ (Tech Stack)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Frontend Layer                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â€¢ Next.js 16 (App Router)                              â”‚
â”‚  â€¢ React 19 + TypeScript                                â”‚
â”‚  â€¢ Tailwind CSS v4                                      â”‚
â”‚  â€¢ shadcn/ui Components                                 â”‚
â”‚  â€¢ Recharts (Analytics)                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Application Layer                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â€¢ Telegram Bot (Telegraf)                              â”‚
â”‚  â€¢ Node.js + TypeScript                                 â”‚
â”‚  â€¢ Next.js API Routes                                   â”‚
â”‚  â€¢ Prisma ORM                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Services Layer                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â€¢ Redis (Caching & Sessions)                           â”‚
â”‚  â€¢ BullMQ (Job Queues)                                  â”‚
â”‚  â€¢ JWT (Authentication)                                 â”‚
â”‚  â€¢ Pino (Logging)                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Persistence Layer                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â€¢ PostgreSQL (Main Database)                           â”‚
â”‚  â€¢ Redis (Cache & Queue Storage)                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ØªØ¯ÙÙ‚ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª (Data Flow)

```
User (Telegram)
    â”‚
    â”œâ”€> [Telegram Bot] (Telegraf)
    â”‚        â”‚
    â”‚        â”œâ”€> Middlewares:
    â”‚        â”‚   â”œâ”€ Error Handler
    â”‚        â”‚   â”œâ”€ Session Management
    â”‚        â”‚   â”œâ”€ Rate Limiting
    â”‚        â”‚   â””â”€ Authentication
    â”‚        â”‚
    â”‚        â”œâ”€> Handlers:
    â”‚        â”‚   â”œâ”€ Start & Onboarding
    â”‚        â”‚   â”œâ”€ Tasks Management
    â”‚        â”‚   â”œâ”€ Referrals
    â”‚        â”‚   â”œâ”€ Games
    â”‚        â”‚   â”œâ”€ Cards & Gems
    â”‚        â”‚   â”œâ”€ Statistics
    â”‚        â”‚   â”œâ”€ Withdrawals
    â”‚        â”‚   â””â”€ Support & Settings
    â”‚        â”‚
    â”‚        â”œâ”€> Services:
    â”‚        â”‚   â”œâ”€ Prisma (Database)
    â”‚        â”‚   â”œâ”€ Redis (Cache)
    â”‚        â”‚   â””â”€ Logger
    â”‚        â”‚
    â”‚        â””â”€> Database (PostgreSQL)
    â”‚
    â””â”€> [Web Dashboard] (Next.js)
             â”‚
             â”œâ”€> API Routes:
             â”‚   â”œâ”€ /api/users
             â”‚   â”œâ”€ /api/tasks
             â”‚   â”œâ”€ /api/rewards
             â”‚   â”œâ”€ /api/referrals
             â”‚   â””â”€ /api/withdrawals
             â”‚
             â””â”€> Database (PostgreSQL)
```

---

## Ø¯Ù„ÙŠÙ„ Ø§Ù„ØªØ«Ø¨ÙŠØª

### Ø§Ù„Ù…ØªØ·Ù„Ø¨Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©

- **Node.js**: v20.x Ø£Ùˆ Ø£Ø­Ø¯Ø«
- **pnpm**: v8.x Ø£Ùˆ Ø£Ø­Ø¯Ø«
- **PostgreSQL**: v16.x Ø£Ùˆ Ø£Ø­Ø¯Ø«
- **Redis**: v7.x Ø£Ùˆ Ø£Ø­Ø¯Ø«
- **Docker** (Ø§Ø®ØªÙŠØ§Ø±ÙŠ): v24.x Ø£Ùˆ Ø£Ø­Ø¯Ø«

### Ø§Ù„ØªØ«Ø¨ÙŠØª Ø§Ù„Ø³Ø±ÙŠØ¹

#### 1. Ø§Ø³ØªÙ†Ø³Ø§Ø® Ø§Ù„Ù…Ø´Ø±ÙˆØ¹

```bash
git clone https://github.com/your-repo/telegram-rewards-bot.git
cd telegram-rewards-bot
```

#### 2. ØªØ«Ø¨ÙŠØª Ø§Ù„Ù…ÙƒØªØ¨Ø§Øª

```bash
pnpm install
```

#### 3. Ø¥Ø¹Ø¯Ø§Ø¯ Ù…Ù„ÙØ§Øª Ø§Ù„Ø¨ÙŠØ¦Ø©

```bash
cp .env.example .env
```

Ù‚Ù… Ø¨ØªØ¹Ø¯ÙŠÙ„ Ù…Ù„Ù `.env` ÙˆØ£Ø¶Ù Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©:

```env
# Telegram Bot Token from @BotFather
TELEGRAM_BOT_TOKEN=your_bot_token_here
TELEGRAM_BOT_USERNAME=YourBotUsername

# Database Connection
DATABASE_URL=postgresql://user:password@localhost:5432/telegram_rewards_bot

# Redis Connection
REDIS_URL=redis://localhost:6379

# JWT Secret (Generate a strong random string)
JWT_SECRET=your_secure_jwt_secret_here

# API Secret
API_SECRET=your_api_secret_here
```

#### 4. Ø¥Ø¹Ø¯Ø§Ø¯ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª

```bash
# Generate Prisma Client
pnpm prisma:generate

# Push schema to database
pnpm prisma:push

# Or run migrations
pnpm prisma:migrate
```

#### 5. ØªØ´ØºÙŠÙ„ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹

**Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„ØªØ·ÙˆÙŠØ± (Development):**

```bash
# Run web app and bot together
pnpm dev:all

# Or run separately:
pnpm dev      # Web app only
pnpm dev:bot  # Bot only
```

**Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¥Ù†ØªØ§Ø¬ (Production):**

```bash
# Build everything
pnpm build

# Start services
pnpm start:all

# Or with Docker Compose
docker-compose up -d
```

### Ø§Ù„ØªØ«Ø¨ÙŠØª Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Docker

```bash
# Build and start all services
docker-compose up -d

# View logs
docker-compose logs -f

# Stop services
docker-compose down
```

---

## Ø§Ù„Ø¨Ù†ÙŠØ© ÙˆØ§Ù„Ù…ÙƒÙˆÙ†Ø§Øª

### Ù‡ÙŠÙƒÙ„ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹

```
telegram-rewards-bot/
â”œâ”€â”€ app/                      # Next.js App (Admin Dashboard)
â”‚   â”œâ”€â”€ api/                  # API Routes
â”‚   â”‚   â”œâ”€â”€ users/
â”‚   â”‚   â”œâ”€â”€ tasks/
â”‚   â”‚   â”œâ”€â”€ rewards/
â”‚   â”‚   â”œâ”€â”€ referrals/
â”‚   â”‚   â””â”€â”€ withdrawals/
â”‚   â”œâ”€â”€ admin/                # Admin pages
â”‚   â”œâ”€â”€ user/                 # User portal
â”‚   â”œâ”€â”€ layout.tsx
â”‚   â””â”€â”€ page.tsx
â”‚
â”œâ”€â”€ bot/                      # Telegram Bot
â”‚   â”œâ”€â”€ handlers/             # Command & Callback Handlers
â”‚   â”‚   â”œâ”€â”€ start.ts
â”‚   â”‚   â”œâ”€â”€ tasks.ts
â”‚   â”‚   â”œâ”€â”€ referrals.ts
â”‚   â”‚   â”œâ”€â”€ games.ts
â”‚   â”‚   â”œâ”€â”€ cards.ts
â”‚   â”‚   â”œâ”€â”€ stats.ts
â”‚   â”‚   â”œâ”€â”€ withdraw.ts
â”‚   â”‚   â”œâ”€â”€ support.ts
â”‚   â”‚   â””â”€â”€ settings.ts
â”‚   â”œâ”€â”€ middlewares/          # Bot Middlewares
â”‚   â”‚   â”œâ”€â”€ session.ts
â”‚   â”‚   â”œâ”€â”€ auth.ts
â”‚   â”‚   â”œâ”€â”€ rateLimit.ts
â”‚   â”‚   â””â”€â”€ errorHandler.ts
â”‚   â”œâ”€â”€ services/             # Bot Services
â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”œâ”€â”€ utils/                # Utilities
â”‚   â”‚   â””â”€â”€ logger.ts
â”‚   â”œâ”€â”€ config.ts             # Bot Configuration
â”‚   â””â”€â”€ index.ts              # Bot Entry Point
â”‚
â”œâ”€â”€ prisma/                   # Prisma ORM
â”‚   â””â”€â”€ schema.prisma         # Database Schema
â”‚
â”œâ”€â”€ lib/                      # Shared Libraries
â”‚   â”œâ”€â”€ auth.ts
â”‚   â”œâ”€â”€ utils.ts
â”‚   â””â”€â”€ security-headers.ts
â”‚
â”œâ”€â”€ components/               # React Components
â”‚   â”œâ”€â”€ ui/                   # shadcn/ui components
â”‚   â”œâ”€â”€ navigation.tsx
â”‚   â””â”€â”€ theme-provider.tsx
â”‚
â”œâ”€â”€ database/                 # Database Scripts
â”‚   â””â”€â”€ schema.sql
â”‚
â”œâ”€â”€ public/                   # Static Assets
â”‚
â”œâ”€â”€ docker-compose.yml        # Docker Compose Config
â”œâ”€â”€ Dockerfile.bot            # Bot Dockerfile
â”œâ”€â”€ Dockerfile.web            # Web Dockerfile
â”œâ”€â”€ tsconfig.json             # TypeScript Config (Web)
â”œâ”€â”€ tsconfig.bot.json         # TypeScript Config (Bot)
â”œâ”€â”€ package.json              # Dependencies
â””â”€â”€ .env.example              # Environment Variables Template
```

### Ø§Ù„Ù…ÙƒÙˆÙ†Ø§Øª Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©

#### 1. Telegram Bot (`bot/`)

**Entry Point** (`bot/index.ts`):
- ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ø¨ÙˆØª Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Telegraf
- ØªØ³Ø¬ÙŠÙ„ Middlewares
- ØªØ³Ø¬ÙŠÙ„ Handlers
- Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø£Ø®Ø·Ø§Ø¡

**Handlers** (`bot/handlers/`):
- `start.ts`: Ø§Ù„ØªØ³Ø¬ÙŠÙ„ ÙˆØ§Ù„ØªØ±Ø­ÙŠØ¨
- `tasks.ts`: Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ù‡Ø§Ù…
- `referrals.ts`: Ù†Ø¸Ø§Ù… Ø§Ù„Ø¥Ø­Ø§Ù„Ø§Øª
- `games.ts`: Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨ Ø§Ù„Ù…ØµØºØ±Ø©
- `cards.ts`: Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª ÙˆØ§Ù„Ø¬ÙˆØ§Ù‡Ø±
- `stats.ts`: Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª
- `withdraw.ts`: Ø§Ù„Ø³Ø­ÙˆØ¨Ø§Øª
- `support.ts`: Ø§Ù„Ø¯Ø¹Ù…
- `settings.ts`: Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª

**Middlewares** (`bot/middlewares/`):
- `session.ts`: Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¬Ù„Ø³Ø§Øª
- `auth.ts`: Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø©
- `rateLimit.ts`: ØªØ­Ø¯ÙŠØ¯ Ù…Ø¹Ø¯Ù„ Ø§Ù„Ø·Ù„Ø¨Ø§Øª
- `errorHandler.ts`: Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø£Ø®Ø·Ø§Ø¡

#### 2. Web Dashboard (`app/`)

**API Routes**:
- `/api/users`: Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†
- `/api/tasks`: Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ù‡Ø§Ù…
- `/api/rewards`: Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…ÙƒØ§ÙØ¢Øª
- `/api/referrals`: ØªØªØ¨Ø¹ Ø§Ù„Ø¥Ø­Ø§Ù„Ø§Øª
- `/api/withdrawals`: Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø³Ø­ÙˆØ¨Ø§Øª

**Admin Dashboard**:
- Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø´Ø§Ù…Ù„Ø©
- Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†
- Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ù‡Ø§Ù…
- Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„Ø³Ø­ÙˆØ¨Ø§Øª
- ØªÙ‚Ø§Ø±ÙŠØ± ÙˆØªØ­Ù„ÙŠÙ„Ø§Øª

#### 3. Database (`prisma/schema.prisma`)

**Ø§Ù„Ø¬Ø¯Ø§ÙˆÙ„ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©**:
- `User`: Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†
- `Task`: Ø§Ù„Ù…Ù‡Ø§Ù… Ø§Ù„Ù…ØªØ§Ø­Ø©
- `TaskCompletion`: Ø³Ø¬Ù„ Ø¥ÙƒÙ…Ø§Ù„ Ø§Ù„Ù…Ù‡Ø§Ù…
- `Referral`: Ù†Ø¸Ø§Ù… Ø§Ù„Ø¥Ø­Ø§Ù„Ø§Øª
- `ReferralTree`: Ø´Ø¬Ø±Ø© Ø§Ù„Ø¥Ø­Ø§Ù„Ø§Øª
- `RewardLedger`: Ø³Ø¬Ù„ Ø§Ù„Ù…ÙƒØ§ÙØ¢Øª
- `Withdrawal`: Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ø³Ø­Ø¨
- `Card`: Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª Ø§Ù„Ù…ØªØ§Ø­Ø©
- `CardCollection`: Ù…Ø¬Ù…ÙˆØ¹Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†
- `GameSession`: Ø¬Ù„Ø³Ø§Øª Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨
- `Leaderboard`: Ù„ÙˆØ­Ø© Ø§Ù„Ù…ØªØµØ¯Ø±ÙŠÙ†
- `Notification`: Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª
- `AuditLog`: Ø³Ø¬Ù„ Ø§Ù„ØªØ¯Ù‚ÙŠÙ‚

---

## ÙˆØ§Ø¬Ù‡Ø§Øª API

### Ù…ØµØ§Ø¯Ù‚Ø© API

Ø¬Ù…ÙŠØ¹ API endpoints ØªØªØ·Ù„Ø¨ Ù…ØµØ§Ø¯Ù‚Ø© Ø¨Ø§Ø³ØªØ«Ù†Ø§Ø¡ endpoints Ø§Ù„Ø¹Ø§Ù…Ø©.

**Header:**
```
Authorization: Bearer <JWT_TOKEN>
```

### Users API

#### Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø³ØªØ®Ø¯Ù… Ø¬Ø¯ÙŠØ¯
```http
POST /api/users
Content-Type: application/json

{
  "telegramId": 123456789,
  "username": "john_doe",
  "referralCode": "ref_abc123"
}

Response 201:
{
  "success": true,
  "data": {
    "id": "uuid",
    "telegramId": 123456789,
    "username": "john_doe",
    "balance": 2000,
    "level": "BEGINNER",
    "referralCode": "ref_xyz789",
    "createdAt": "2025-11-04T10:00:00Z"
  }
}
```

#### Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø³ØªØ®Ø¯Ù…
```http
GET /api/users?id=uuid
GET /api/users?telegramId=123456789

Response 200:
{
  "success": true,
  "data": {
    "id": "uuid",
    "telegramId": 123456789,
    "username": "john_doe",
    "balance": 15000,
    "level": "PROFESSIONAL",
    "tasksCompleted": 25,
    "referralCount": 5
  }
}
```

### Tasks API

#### Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ù…Ù‡Ø§Ù… Ø§Ù„Ù…ØªØ§Ø­Ø©
```http
GET /api/tasks?category=CHANNEL_SUBSCRIPTION&active=true

Response 200:
{
  "success": true,
  "data": [
    {
      "id": "uuid",
      "name": "Join Main Channel",
      "description": "Subscribe to our main Telegram channel",
      "category": "CHANNEL_SUBSCRIPTION",
      "reward": 5000,
      "difficulty": "EASY",
      "isActive": true
    }
  ],
  "pagination": {
    "page": 1,
    "limit": 20,
    "total": 50
  }
}
```

#### Ø¥Ù†Ø´Ø§Ø¡ Ù…Ù‡Ù…Ø© Ø¬Ø¯ÙŠØ¯Ø© (Admin)
```http
POST /api/tasks
Content-Type: application/json
Authorization: Bearer <ADMIN_TOKEN>

{
  "name": "Join VIP Channel",
  "description": "Subscribe to VIP channel for exclusive content",
  "category": "CHANNEL_SUBSCRIPTION",
  "reward": 10000,
  "channelUsername": "your_channel",
  "minLevel": "PROFESSIONAL"
}

Response 201:
{
  "success": true,
  "data": {
    "id": "uuid",
    "name": "Join VIP Channel",
    "reward": 10000,
    "createdAt": "2025-11-04T10:00:00Z"
  }
}
```

### Rewards API

#### Ø¥ÙƒÙ…Ø§Ù„ Ù…Ù‡Ù…Ø©
```http
POST /api/rewards/complete-task
Content-Type: application/json

{
  "userId": "uuid",
  "taskId": "uuid",
  "rewardAmount": 5000
}

Response 200:
{
  "success": true,
  "data": {
    "rewardAmount": 5000,
    "newBalance": 20000,
    "bonusApplied": false
  }
}
```

### Referrals API

#### Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø¥Ø­Ø§Ù„Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
```http
GET /api/referrals?userId=uuid&level=1

Response 200:
{
  "success": true,
  "data": {
    "level1": [
      {
        "referredId": "uuid",
        "username": "friend1",
        "joinedAt": "2025-11-01T10:00:00Z",
        "earnings": 1500
      }
    ],
    "level2": [],
    "level3": [],
    "totalEarnings": 15000
  }
}
```

### Withdrawals API

#### Ø·Ù„Ø¨ Ø³Ø­Ø¨
```http
POST /api/withdrawals
Content-Type: application/json

{
  "userId": "uuid",
  "amount": 5000000,
  "walletAddress": "TXxxx...xxx",
  "network": "TRC20"
}

Response 201:
{
  "success": true,
  "data": {
    "id": "uuid",
    "amount": 5000000,
    "usdtAmount": 5.0,
    "status": "PENDING",
    "requestedAt": "2025-11-04T10:00:00Z"
  }
}
```

#### Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø³Ø¬Ù„ Ø§Ù„Ø³Ø­ÙˆØ¨Ø§Øª
```http
GET /api/withdrawals?userId=uuid

Response 200:
{
  "success": true,
  "data": [
    {
      "id": "uuid",
      "amount": 5000000,
      "usdtAmount": 5.0,
      "status": "COMPLETED",
      "txHash": "0x...",
      "requestedAt": "2025-11-01T10:00:00Z",
      "completedAt": "2025-11-02T08:30:00Z"
    }
  ]
}
```

---

## ØªØ¯ÙÙ‚Ø§Øª Ø§Ù„Ø¨ÙˆØª

### 1. ØªØ¯ÙÙ‚ Ø§Ù„ØªØ³Ø¬ÙŠÙ„ (Onboarding)

```
User sends /start [ref_code]
        â”‚
        â”œâ”€> Check if user exists
        â”‚   â”œâ”€ Yes: Welcome back + Show menu
        â”‚   â””â”€ No: Create new user
        â”‚          â”‚
        â”‚          â”œâ”€> Extract referral code
        â”‚          â”œâ”€> Create user record
        â”‚          â”œâ”€> Process referral rewards (3 levels)
        â”‚          â”œâ”€> Send welcome message
        â”‚          â””â”€> Show verification task
        â”‚
        â””â”€> Create/Update session in Redis
```

### 2. ØªØ¯ÙÙ‚ Ø¥ÙƒÙ…Ø§Ù„ Ø§Ù„Ù…Ù‡Ø§Ù…

```
User clicks "Tasks"
        â”‚
        â”œâ”€> Show task categories
        â”‚
User selects category
        â”‚
        â”œâ”€> Fetch tasks in category
        â”œâ”€> Check completed tasks
        â””â”€> Show task list
                â”‚
User selects task
        â”‚
        â”œâ”€> Show task details
        â”œâ”€> Show action button (Join/Watch/etc.)
        â”‚
User clicks "I Completed"
        â”‚
        â”œâ”€> Verify completion
        â”‚   â”œâ”€ Channel/Group: Check membership via API
        â”‚   â”œâ”€ Video: Time-based verification
        â”‚   â””â”€ Other: Mark for admin review
        â”‚
        â”œâ”€> Award coins
        â”œâ”€> Update user balance
        â”œâ”€> Create task completion record
        â”œâ”€> Update statistics
        â””â”€> Send success message
```

### 3. ØªØ¯ÙÙ‚ Ø§Ù„Ø¥Ø­Ø§Ù„Ø§Øª

```
User shares referral link
        â”‚
New user clicks link
        â”‚
        â”œâ”€> Extract referral code from /start
        â”‚
New user registers
        â”‚
        â”œâ”€> Level 1 Processing:
        â”‚   â”œâ”€ Award 5,000 coins to referrer
        â”‚   â”œâ”€ Award 2,000 coins to new user
        â”‚   â”œâ”€ Create referral record
        â”‚   â””â”€ Send notification to referrer
        â”‚
        â”œâ”€> Level 2 Processing:
        â”‚   â”œâ”€ Find referrer's referrer
        â”‚   â”œâ”€ Award 500 coins
        â”‚   â””â”€ Update referral tree
        â”‚
        â””â”€> Level 3 Processing:
            â”œâ”€ Find level 2's referrer
            â”œâ”€ Award 250 coins
            â””â”€ Update referral tree
```

### 4. ØªØ¯ÙÙ‚ Ø§Ù„Ø³Ø­Ø¨

```
User clicks "Withdraw"
        â”‚
        â”œâ”€> Check balance >= 5,000,000 coins
        â”‚   â”œâ”€ No: Show error + suggestions
        â”‚   â””â”€ Yes: Continue
        â”‚
        â”œâ”€> Show withdrawal info
        â”‚
User clicks "Request Withdrawal"
        â”‚
        â”œâ”€> Request wallet address
        â”‚
User sends wallet address
        â”‚
        â”œâ”€> Validate address format
        â”œâ”€> Calculate USDT amount
        â”œâ”€> Create withdrawal request
        â”œâ”€> Lock user balance
        â”œâ”€> Send confirmation
        â”‚
Admin reviews request
        â”‚
        â”œâ”€> Approve:
        â”‚   â”œâ”€ Process payment
        â”‚   â”œâ”€ Update status to COMPLETED
        â”‚   â”œâ”€ Add transaction hash
        â”‚   â””â”€ Notify user
        â”‚
        â””â”€> Reject:
            â”œâ”€ Update status to REJECTED
            â”œâ”€ Unlock user balance
            â””â”€ Notify user with reason
```

---

## Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª

### Ù…Ø®Ø·Ø· Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª (ERD)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     Users      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)        â”‚â—„â”€â”
â”‚ telegramId     â”‚  â”‚
â”‚ username       â”‚  â”‚
â”‚ balance        â”‚  â”‚
â”‚ level          â”‚  â”‚
â”‚ referralCode   â”‚  â”‚
â”‚ referredById   â”œâ”€â”€â”˜ (self-referential)
â”‚ tasksCompleted â”‚
â”‚ referralCount  â”‚
â”‚ createdAt      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚ 1
       â”‚
       â”‚ N
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚TaskCompletions â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)        â”‚
â”‚ userId (FK)    â”‚
â”‚ taskId (FK)    â”‚
â”‚ rewardAmount   â”‚
â”‚ completedAt    â”‚
â”‚ verified       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚ N
       â”‚
       â”‚ 1
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     Tasks      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)        â”‚
â”‚ name           â”‚
â”‚ category       â”‚
â”‚ reward         â”‚
â”‚ isActive       â”‚
â”‚ expiresAt      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Referrals    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)        â”‚
â”‚ referrerId (FK)â”‚â”€â”€â–º Users.id
â”‚ referredId (FK)â”‚â”€â”€â–º Users.id
â”‚ level          â”‚
â”‚ commission     â”‚
â”‚ createdAt      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ReferralTree   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)        â”‚
â”‚ userId (FK)    â”‚â”€â”€â–º Users.id
â”‚ level1Count    â”‚
â”‚ level2Count    â”‚
â”‚ level3Count    â”‚
â”‚ level1Earnings â”‚
â”‚ level2Earnings â”‚
â”‚ level3Earnings â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Withdrawals   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)        â”‚
â”‚ userId (FK)    â”‚â”€â”€â–º Users.id
â”‚ amount         â”‚
â”‚ usdtAmount     â”‚
â”‚ walletAddress  â”‚
â”‚ status         â”‚
â”‚ txHash         â”‚
â”‚ requestedAt    â”‚
â”‚ completedAt    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Indexes Ù„Ù„Ø£Ø¯Ø§Ø¡

```sql
-- Users
CREATE INDEX idx_users_telegram_id ON users(telegram_id);
CREATE INDEX idx_users_referral_code ON users(referral_code);
CREATE INDEX idx_users_level ON users(level);
CREATE INDEX idx_users_status ON users(status);

-- Tasks
CREATE INDEX idx_tasks_category ON tasks(category);
CREATE INDEX idx_tasks_type ON tasks(type);
CREATE INDEX idx_tasks_is_active ON tasks(is_active);
CREATE INDEX idx_tasks_expires_at ON tasks(expires_at);

-- TaskCompletions
CREATE INDEX idx_task_completions_user_id ON task_completions(user_id);
CREATE INDEX idx_task_completions_task_id ON task_completions(task_id);
CREATE INDEX idx_task_completions_verified ON task_completions(verified);

-- Referrals
CREATE INDEX idx_referrals_referrer_id ON referrals(referrer_id);
CREATE INDEX idx_referrals_referred_id ON referrals(referred_id);
CREATE INDEX idx_referrals_level ON referrals(level);

-- Withdrawals
CREATE INDEX idx_withdrawals_user_id ON withdrawals(user_id);
CREATE INDEX idx_withdrawals_status ON withdrawals(status);
CREATE INDEX idx_withdrawals_requested_at ON withdrawals(requested_at);
```

---

## Ø§Ù„Ø£Ù…Ø§Ù†

### 1. Ù…ØµØ§Ø¯Ù‚Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†

**Telegram Web App Verification:**
```typescript
// lib/auth.ts
function verifyTelegramWebAppData(initData: string): boolean {
  // Verify data hash using bot token
  const dataCheckString = createDataCheckString(initData);
  const secretKey = createHmac('sha256', 'WebAppData')
    .update(TELEGRAM_BOT_TOKEN)
    .digest();
  const hash = createHmac('sha256', secretKey)
    .update(dataCheckString)
    .digest('hex');
  
  return hash === receivedHash;
}
```

**JWT Tokens:**
- ØªÙˆÙ„ÙŠØ¯ JWT Ø¨Ø¹Ø¯ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Telegram
- Ø§Ù†ØªÙ‡Ø§Ø¡ ØµÙ„Ø§Ø­ÙŠØ©: 7 Ø£ÙŠØ§Ù…
- ØªØ®Ø²ÙŠÙ† ÙÙŠ httpOnly cookies
- ØªØ¬Ø¯ÙŠØ¯ ØªÙ„Ù‚Ø§Ø¦ÙŠ

### 2. Ø­Ù…Ø§ÙŠØ© Ù…Ù† Ø§Ù„Ø§Ø­ØªÙŠØ§Ù„

**ÙƒØ´Ù Ø§Ù„Ø­Ø³Ø§Ø¨Ø§Øª Ø§Ù„Ù…ØªØ¹Ø¯Ø¯Ø©:**
```typescript
// Detection based on:
- Device fingerprinting
- IP address tracking
- Behavioral analysis
- Pattern recognition
```

**Rate Limiting:**
```typescript
// Per user:
- 30 requests per minute
- 1000 requests per hour
- Cooldown periods for sensitive operations
```

**Task Verification:**
```typescript
// Multi-layer verification:
- Telegram API checks (for channels/groups)
- Time-based delays
- Screenshot verification (optional)
- Admin review for suspicious activities
```

### 3. Ø£Ù…Ø§Ù† Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª

**Encryption:**
- Wallet addresses encrypted at rest
- Sensitive data hashed
- SSL/TLS for all communications

**SQL Injection Prevention:**
- Parameterized queries via Prisma ORM
- Input validation and sanitization
- Type-safe operations

**XSS Protection:**
- Content Security Policy headers
- Input sanitization
- Output encoding

### 4. Ø£Ù…Ø§Ù† Ø§Ù„Ø³Ø­ÙˆØ¨Ø§Øª

```typescript
// Withdrawal security measures:
- Multi-step verification
- Balance locking during processing
- Transaction logging
- Admin approval required
- Fraud detection algorithms
- Maximum withdrawal limits
- Cooldown periods
```

---

## Ø§Ù„Ù†Ø´Ø±

### Ø§Ù„Ù†Ø´Ø± Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Docker Compose

```bash
# 1. Clone repository
git clone https://github.com/your-repo/telegram-rewards-bot.git
cd telegram-rewards-bot

# 2. Setup environment
cp .env.example .env
# Edit .env with your values

# 3. Build and start
docker-compose up -d

# 4. Check logs
docker-compose logs -f

# 5. Run migrations
docker-compose exec web pnpm prisma:migrate

# 6. Create admin user
docker-compose exec web node scripts/create-admin.js
```

### Ø§Ù„Ù†Ø´Ø± Ø¹Ù„Ù‰ Railway

```bash
# 1. Install Railway CLI
npm install -g railway

# 2. Login
railway login

# 3. Initialize project
railway init

# 4. Add PostgreSQL
railway add postgresql

# 5. Add Redis
railway add redis

# 6. Set environment variables
railway variables set TELEGRAM_BOT_TOKEN=your_token
railway variables set JWT_SECRET=your_secret

# 7. Deploy
railway up
```

### Ø§Ù„Ù†Ø´Ø± Ø¹Ù„Ù‰ Vercel (Web) + VPS (Bot)

**Vercel (Web App):**
```bash
# 1. Install Vercel CLI
npm install -g vercel

# 2. Deploy
vercel --prod

# 3. Set environment variables in Vercel dashboard
```

**VPS (Bot):**
```bash
# 1. SSH to VPS
ssh user@your-vps-ip

# 2. Clone repository
git clone https://github.com/your-repo/telegram-rewards-bot.git
cd telegram-rewards-bot

# 3. Install dependencies
pnpm install

# 4. Build bot
pnpm build:bot

# 5. Setup PM2
pm2 start dist/bot/index.js --name telegram-bot

# 6. Save PM2 config
pm2 save
pm2 startup
```

### Ø§Ù„Ù†Ø´Ø± Ø¹Ù„Ù‰ Heroku

```bash
# 1. Create Heroku app
heroku create your-app-name

# 2. Add PostgreSQL
heroku addons:create heroku-postgresql:hobby-dev

# 3. Add Redis
heroku addons:create heroku-redis:hobby-dev

# 4. Set environment variables
heroku config:set TELEGRAM_BOT_TOKEN=your_token
heroku config:set JWT_SECRET=your_secret

# 5. Deploy
git push heroku main

# 6. Run migrations
heroku run pnpm prisma:migrate
```

---

## Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª

### Unit Tests

```typescript
// Example: Testing referral rewards calculation
describe('Referral Rewards', () => {
  it('should calculate level 1 rewards correctly', () => {
    const reward = calculateLevel1Reward(1000);
    expect(reward).toBe(1100); // 1000 + 10%
  });

  it('should create referral tree correctly', async () => {
    const tree = await createReferralTree(userId);
    expect(tree.level1Count).toBe(0);
    expect(tree.level2Count).toBe(0);
    expect(tree.level3Count).toBe(0);
  });
});
```

### Integration Tests

```typescript
// Example: Testing task completion flow
describe('Task Completion Flow', () => {
  it('should complete task and award coins', async () => {
    const user = await createTestUser();
    const task = await createTestTask();
    
    const result = await completeTask(user.id, task.id);
    
    expect(result.success).toBe(true);
    expect(result.rewardAmount).toBe(task.reward);
    
    const updatedUser = await getUser(user.id);
    expect(updatedUser.balance).toBe(user.balance + task.reward);
  });
});
```

### E2E Tests

```typescript
// Example: Testing bot conversation flow
describe('Bot E2E Tests', () => {
  it('should register new user and show menu', async () => {
    const bot = createTestBot();
    
    // Simulate /start command
    const response = await bot.sendCommand('/start ref_abc123');
    
    expect(response.text).toContain('Welcome');
    expect(response.keyboard).toHaveLength(5);
  });
});
```

### ØªØ´ØºÙŠÙ„ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª

```bash
# Run all tests
pnpm test

# Run with coverage
pnpm test:coverage

# Run in watch mode
pnpm test:watch

# Run specific test file
pnpm test bot/handlers/start.test.ts
```

---

## Ø§Ù„ØµÙŠØ§Ù†Ø©

### Ø§Ù„Ù†Ø³Ø® Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠ

**Database Backup:**
```bash
# Manual backup
pg_dump -U rewards_user telegram_rewards_bot > backup_$(date +%Y%m%d).sql

# Automated daily backups
0 2 * * * pg_dump -U rewards_user telegram_rewards_bot > /backups/backup_$(date +\%Y\%m\%d).sql
```

**Redis Backup:**
```bash
# Redis automatically creates dump.rdb
# Copy to backup location
cp /var/lib/redis/dump.rdb /backups/redis_$(date +%Y%m%d).rdb
```

### Ø§Ù„Ù…Ø±Ø§Ù‚Ø¨Ø©

**Health Checks:**
```typescript
// app/api/health/route.ts
export async function GET() {
  const checks = {
    database: await checkDatabase(),
    redis: await checkRedis(),
    bot: await checkBot(),
  };
  
  const healthy = Object.values(checks).every(c => c === true);
  
  return Response.json({
    healthy,
    checks,
    timestamp: new Date().toISOString(),
  });
}
```

**Logging:**
```typescript
// Structured logging with Pino
logger.info({ userId, taskId }, 'Task completed');
logger.error({ error, userId }, 'Task completion failed');
```

**Metrics:**
- Active users (daily/weekly/monthly)
- Tasks completed
- Coins distributed
- Withdrawals processed
- Error rates
- Response times

### ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù†Ø¸Ø§Ù…

```bash
# 1. Pull latest changes
git pull origin main

# 2. Install dependencies
pnpm install

# 3. Run migrations
pnpm prisma:migrate

# 4. Build
pnpm build

# 5. Restart services
pm2 restart all

# Or with Docker
docker-compose up -d --build
```

---

## Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø§Ù„Ø´Ø§Ø¦Ø¹Ø©

### Ù„Ù„Ù…Ø·ÙˆØ±ÙŠÙ†

**Q: ÙƒÙŠÙ Ø£Ø¶ÙŠÙ Ù†ÙˆØ¹ Ù…Ù‡Ù…Ø© Ø¬Ø¯ÙŠØ¯ØŸ**
```typescript
// 1. Add to Prisma schema
enum TaskCategory {
  // ... existing categories
  NEW_CATEGORY
}

// 2. Add handler in bot/handlers/tasks.ts
// 3. Add verification logic
// 4. Run migration
pnpm prisma:migrate
```

**Q: ÙƒÙŠÙ Ø£ØºÙŠØ± Ù…Ø¹Ø¯Ù„ Ø§Ù„ØªØ­ÙˆÙŠÙ„ Ù„Ù„Ø¹Ù…Ù„Ø§ØªØŸ**
```env
# Update in .env
COIN_TO_USDT_RATE=1000000  # 1 USDT = 1,000,000 coins
```

**Q: ÙƒÙŠÙ Ø£Ø¶ÙŠÙ Ù„ØºØ© Ø¬Ø¯ÙŠØ¯Ø©ØŸ**
```typescript
// 1. Add translation files in bot/locales/
// 2. Update language detection in middleware
// 3. Add language option in settings
```

### Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†

**Q: ÙƒÙ… Ø£Ø­ØªØ§Ø¬ Ù„Ù„Ø³Ø­Ø¨ØŸ**

A: Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ø¯Ù†Ù‰ 5,000,000 Ø¹Ù…Ù„Ø© (5 USDT).

**Q: Ù…ØªÙ‰ ØªØªÙ… Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø³Ø­Ø¨ØŸ**

A: Ø®Ù„Ø§Ù„ 24-48 Ø³Ø§Ø¹Ø© Ù…Ù† ØªÙ‚Ø¯ÙŠÙ… Ø§Ù„Ø·Ù„Ø¨.

**Q: ÙƒÙŠÙ ÙŠØ¹Ù…Ù„ Ù†Ø¸Ø§Ù… Ø§Ù„Ø¥Ø­Ø§Ù„Ø§ØªØŸ**

A: Ù„Ø¯ÙŠÙƒ 3 Ù…Ø³ØªÙˆÙŠØ§Øª:
- Ø§Ù„Ù…Ø³ØªÙˆÙ‰ 1: 1,000 Ø¹Ù…Ù„Ø© + 10% Ø¹Ù…ÙˆÙ„Ø©
- Ø§Ù„Ù…Ø³ØªÙˆÙ‰ 2: 500 Ø¹Ù…Ù„Ø© + 5% Ø¹Ù…ÙˆÙ„Ø©
- Ø§Ù„Ù…Ø³ØªÙˆÙ‰ 3: 250 Ø¹Ù…Ù„Ø© + 2% Ø¹Ù…ÙˆÙ„Ø©

**Q: Ù‡Ù„ ÙŠÙ…ÙƒÙ†Ù†ÙŠ Ù„Ø¹Ø¨ Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨ Ø¹Ø¯Ø© Ù…Ø±Ø§ØªØŸ**

A: Ù†Ø¹Ù…ØŒ Ù„ÙƒÙ† Ù‡Ù†Ø§Ùƒ Ø­Ø¯ Ù„Ù„Ù…Ø­Ø§ÙˆÙ„Ø§Øª Ø§Ù„ÙŠÙˆÙ…ÙŠØ©:
- Ø§Ø¶Ø±Ø¨ Ø§Ù„Ù‡Ø¯Ù: 3 Ù…Ø­Ø§ÙˆÙ„Ø§Øª
- Ø¹Ø¬Ù„Ø© Ø§Ù„Ø­Ø¸: Ù…Ø­Ø§ÙˆÙ„Ø© ÙˆØ§Ø­Ø¯Ø©
- ØªØ­Ø¯ÙŠ Ø§Ù„Ø£Ø³Ø¦Ù„Ø©: Ù…Ø­Ø§ÙˆÙ„ØªØ§Ù†

---

## Ø§Ù„Ø¯Ø¹Ù… ÙˆØ§Ù„ØªÙˆØ§ØµÙ„

### Ù„Ù„Ù…Ø³Ø§Ø¹Ø¯Ø© Ø§Ù„ØªÙ‚Ù†ÙŠØ©

- ğŸ“§ Email: dev@rewards-bot.com
- ğŸ’¬ Telegram: @support_bot
- ğŸ“š Documentation: https://docs.rewards-bot.com
- ğŸ› Issues: https://github.com/your-repo/issues

### Ù„Ù„Ù…Ø³Ø§Ù‡Ù…Ø©

```bash
# 1. Fork repository
# 2. Create feature branch
git checkout -b feature/amazing-feature

# 3. Commit changes
git commit -m "Add amazing feature"

# 4. Push to branch
git push origin feature/amazing-feature

# 5. Open Pull Request
```

### Ø§Ù„ØªØ±Ø®ÙŠØµ

MIT License - Ø±Ø§Ø¬Ø¹ Ù…Ù„Ù LICENSE Ù„Ù„ØªÙØ§ØµÙŠÙ„.

---

## Ø®Ø§Ø±Ø·Ø© Ø§Ù„Ø·Ø±ÙŠÙ‚

### Ø§Ù„Ù†Ø³Ø®Ø© 1.0 (Ø§Ù„Ø­Ø§Ù„ÙŠØ©)
- âœ… Ù†Ø¸Ø§Ù… Ø§Ù„Ù…Ù‡Ø§Ù… Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ
- âœ… Ø§Ù„Ø¥Ø­Ø§Ù„Ø§Øª Ù…ØªØ¹Ø¯Ø¯Ø© Ø§Ù„Ù…Ø³ØªÙˆÙŠØ§Øª
- âœ… Ø§Ù„Ø³Ø­ÙˆØ¨Ø§Øª Ø¹Ø¨Ø± USDT
- âœ… Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨ Ø§Ù„Ù…ØµØºØ±Ø©
- âœ… Ù†Ø¸Ø§Ù… Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ
- âœ… Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… Ø§Ù„Ø¥Ø¯Ø§Ø±ÙŠØ©

### Ø§Ù„Ù†Ø³Ø®Ø© 2.0 (Ù‚Ø±ÙŠØ¨Ø§Ù‹)
- ğŸ”„ Marketplace Ù…ØªÙ‚Ø¯Ù… Ù„Ù„Ø¨Ø·Ø§Ù‚Ø§Øª
- ğŸ”„ Ø¨Ø·ÙˆÙ„Ø§Øª Ø£Ø³Ø¨ÙˆØ¹ÙŠØ©
- ğŸ”„ Ù†Ø¸Ø§Ù… Achievement/Badges
- ğŸ”„ ØªØ­Ù„ÙŠÙ„Ø§Øª Ù…ØªÙ‚Ø¯Ù…Ø©
- ğŸ”„ ØªÙƒØ§Ù…Ù„ Ù…Ø¹ Ù…Ù†ØµØ§Øª Ø®Ø§Ø±Ø¬ÙŠØ©
- ğŸ”„ ØªØ·Ø¨ÙŠÙ‚ Ù…ÙˆØ¨Ø§ÙŠÙ„ (React Native)

### Ø§Ù„Ù†Ø³Ø®Ø© 3.0 (Ù…Ø³ØªÙ‚Ø¨Ù„ÙŠØ©)
- ğŸ“… ØªÙˆØµÙŠØ§Øª Ù…Ù‡Ø§Ù… Ø°ÙƒÙŠØ© (AI)
- ğŸ“… NFT integration
- ğŸ“… DeFi features
- ğŸ“… Multi-language full support
- ğŸ“… Advanced fraud detection
- ğŸ“… Automated market maker

---

**ØªÙ… Ø¨Ù†Ø§Ø¡ Ù‡Ø°Ø§ Ø§Ù„Ù†Ø¸Ø§Ù… Ø¨Ù€ â¤ï¸ Ø¨ÙˆØ§Ø³Ø·Ø© ÙØ±ÙŠÙ‚ Ø§Ù„ØªØ·ÙˆÙŠØ±**

Ø¢Ø®Ø± ØªØ­Ø¯ÙŠØ«: 2025-11-04
